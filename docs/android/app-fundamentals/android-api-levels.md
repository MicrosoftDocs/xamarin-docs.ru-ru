---
title: Основные сведения об уровнях API Android
description: Xamarin. Android имеет несколько параметров уровня API Android, которые определяют совместимость приложения с несколькими версиями Android. В этом руководство объясняется, что означают эти параметры, как их настроить и как они влияют на приложение во время выполнения.
ms.prod: xamarin
ms.assetid: 58CB7B34-3140-4BEB-BE2E-209928C1878C
ms.technology: xamarin-android
author: davidortinau
ms.author: daortin
ms.date: 08/21/2018
ms.openlocfilehash: bb41a6e4ea477ed0a7932df441678e53a304aa35
ms.sourcegitcommit: 8fa0cb9ccbc107d697aa5b9113a4e5d1e75d6eb9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/27/2020
ms.locfileid: "96303083"
---
# <a name="understanding-android-api-levels"></a>Общие сведения об уровнях API Android

_Xamarin. Android имеет несколько параметров уровня API Android, которые определяют совместимость приложения с несколькими версиями Android. В этом руководство объясняется, что означают эти параметры, как их настроить и как они влияют на приложение во время выполнения._

## <a name="quick-start"></a>Быстрый запуск

Xamarin. Android предоставляет три параметра проекта уровня API Android:

- [Целевая платформа](#framework) &ndash; Указывает, какая платформа будет использоваться при сборке приложения. Этот уровень API используется на этапе *компиляции* Xamarin. Android.

- [Минимальная версия Android](#minimum) &ndash; Указывает самую раннюю версию Android, которую должно поддерживать ваше приложение. Этот уровень API используется Android во время *выполнения* .

- [Целевая версия Android](#target) &ndash; Указывает версию Android, на которой должно выполняться приложение. Этот уровень API используется Android во время *выполнения* .

Прежде чем можно будет настроить уровень API для проекта, необходимо установить компоненты платформы SDK для этого уровня API. Дополнительные сведения о загрузке и установке компонентов пакет SDK для Android см. в разделе [пакет SDK для Android Setup](~/android/get-started/installation/android-sdk.md).

> [!NOTE]
> Начиная с августа 2020, для консоли Google Play требуется, чтобы новые приложения были нацелены на уровень API 29 (Android 10,0) или более поздней версии.
Существующие приложения должны быть нацелены на уровень API 29 или выше, начиная с ноября 2020. Дополнительные сведения см. в разделе [требования к целевому уровню API для консоли воспроизведения](https://support.google.com/googleplay/android-developer/answer/9859152#targetsdk) раздела "Создание и настройка приложения" в документации по консоли воспроизведения.

<!-- markdownlint-disable MD001 -->

# <a name="visual-studio"></a>[Visual Studio](#tab/windows)

Как правило, для всех трех уровней API Xamarin. Android задано одно и то же значение. На странице **приложение** задайте для параметра **компилировать с помощью версии Android (Целевая платформа)** последнюю стабильную версию API (или, как минимум, до версии Android, которая содержит все необходимые компоненты).
На следующем снимке экрана для целевой платформы задано значение **Android 7,1 (API уровня 25-Nougat)**:

[![Версия целевой платформы по умолчанию компилируется с использованием версии Android](android-api-levels-images/vs-defaults-sml.png)](android-api-levels-images/vs-defaults.png#lightbox)

На странице **манифеста Android** установите минимальную версию Android для **использования компиляции с использованием версии пакета SDK** и задайте для целевой версии Android то же значение, что и для целевой версии .NET Framework (на следующем снимке экрана Целевая платформа android имеет значение **Android 7,1 (Nougat)**):

[![Минимальная и Целевая версии Android, для которых задана Целевая версия .NET Framework](android-api-levels-images/vs-manifest-defaults-sml.png)](android-api-levels-images/vs-manifest-defaults.png#lightbox)

Если вы хотите обеспечить обратную совместимость с более ранней версией Android, задайте для **минимальной версии Android целевую** версию Android, которая будет поддерживаться вашим приложением. (Обратите внимание, что уровень API 14 — это минимальный уровень API, необходимый для [Google Play служб и поддержки Firebase](https://android-developers.googleblog.com/2016/11/google-play-services-and-firebase-for-android-will-support-api-level-14-at-minimum.html).) В следующем примере конфигурация поддерживает версии Android из API уровня 14 через уровень API 25.

[![Компилировать с использованием уровня API 25 Nougat, минимальная версия Android установлена на уровень API 14](android-api-levels-images/vs-minimum-sml.png)](android-api-levels-images/vs-minimum.png#lightbox)

# <a name="visual-studio-for-mac"></a>[Visual Studio для Mac](#tab/macos)

Как правило, для всех трех уровней API Xamarin. Android задано одно и то же значение. Задайте для **целевой платформы** последнюю стабильную версию API (или, как минимум, до версии Android, которая содержит все необходимые компоненты). Чтобы задать **целевую платформу**, перейдите к разделу **Сборка > общие** в **параметрах проекта**. На следующем снимке экрана Целевая платформа настроена для **использования последней установленной платформы (8,0)**:

[![Целевая платформа по умолчанию использовать последнюю установленную платформу](android-api-levels-images/xs-default-target-sml.png)](android-api-levels-images/xs-default-target.png#lightbox)

Параметры минимальной и целевой версий Android можно найти в разделе **сборка > приложение Android** в **параметрах проекта**. Задайте минимальную версию Android для **автоматического использования целевой версии .NET Framework** и задайте в качестве целевой версии Android то же значение, что и у целевой версии .NET Framework. На следующем снимке экрана Целевая платформа Android настроена на **android 8,0 (API уровня 26)** в соответствии с параметром целевой платформы выше:

[![Задание уровней целевого объекта и платформы в параметрах проекта](android-api-levels-images/xs-default-app-sml.png)](android-api-levels-images/xs-default-app.png#lightbox)

Если вы хотите обеспечить обратную совместимость с более ранней версией Android, измените **минимальную версию** Android на самую старую версию Android, которую должно поддерживать ваше приложение. Обратите внимание, что уровень API 14 — это минимальный уровень API, необходимый для [Google Play служб и поддержки Firebase](https://android-developers.googleblog.com/2016/11/google-play-services-and-firebase-for-android-will-support-api-level-14-at-minimum.html).
Например, следующая конфигурация поддерживает версии Android как раньше, чем API уровня 14:

[![Минимальная и Целевая версии, для которых задано автоматическое использование целевой версии .NET Framework](android-api-levels-images/xs-minimum-sml.png)](android-api-levels-images/xs-minimum.png#lightbox)

-----

Если приложение поддерживает несколько версий Android, в коде должны содержаться проверки среды выполнения, чтобы обеспечить работу приложения с минимальной версией Android (Дополнительные сведения см. в разделе [проверки среды выполнения для версий Android](#runtimechecks) ниже). Если вы используете или создаете библиотеку, ознакомьтесь со статьей [уровни API и библиотеки](#libraries) ниже, чтобы получить рекомендации по настройке параметров уровня API для библиотек.

## <a name="android-versions-and-api-levels"></a>Версии Android и уровни API

По мере развития платформы Android и выпуска новых версий Android каждой версии Android назначается уникальный целочисленный идентификатор, называемый *уровнем API*. Таким образом, каждая версия Android соответствует одному уровню API Android. Так как пользователи устанавливают приложения на более ранних версий, а также в самых последних версиях Android, приложения для работы в реальном времени для Android должны быть разработаны с несколькими уровнями API Android.

### <a name="android-versions"></a>Версии Android

Каждый выпуск Android проходит несколько имен:

- Версия Android, например **android 9,0**
- Имя кода (или десерт), например _круговая диаграмма_
- Соответствующий уровень API, например **уровень API 28**

Имя кода Android может соответствовать нескольким версиям и уровням API (как показано в таблице ниже), но каждая версия Android соответствует ровно одному уровню API.

Кроме того, Xamarin. Android определяет *коды версий сборки* , которые сопоставляются с известными уровнями API Android. Следующая таблица поможет вам выполнить преобразование между уровнем API, версией Android, кодовым именем и кодом версии сборки Xamarin. Android (коды версий сборки определены в `Android.OS` пространстве имен):

[!include[](~/android/includes/api-levels.md)]

Как показано в этой таблице, новые версии Android чаще всего выпускаются &ndash; более чем в одном выпуске в год. В результате среда устройств Android, на которых может работать ваше приложение, включает в себя множество более старых и более новых версий Android. Как вы можете гарантировать, что приложение будет выполняться единообразно и надежно на разных версиях Android? Уровни API для Android могут помочь в управлении этой проблемой.

### <a name="android-api-levels"></a>Уровни API Android

Каждое устройство Android выполняется только на *одном* уровне API &ndash; . Этот уровень API гарантированно уникален для каждой версии платформы Android. Уровень API точно определяет версию набора API, к которому может обращаться приложение. Он определяет сочетание элементов манифеста, разрешений и т. д., которые вы задаете в качестве разработчика. Система Android на уровнях API позволяет Android определить, совместимо ли приложение с образом системы Android перед установкой приложения на устройстве.

При сборке приложения он содержит следующие сведения об уровне API:

- *Целевой* уровень API Android, на котором построено приложение для запуска.

- *Минимальный* уровень API Android, который должен иметь устройство Android для запуска приложения. 

Эти параметры используются, чтобы убедиться, что функции, необходимые для корректного запуска приложения, доступны на устройстве Android во время установки. В противном случае приложение блокируется на этом устройстве. Например, если уровень API устройства Android ниже минимального уровня API, указанного для приложения, устройство Android не позволит пользователю установить приложение.

## <a name="project-api-level-settings"></a>Параметры уровня API проекта

В следующих разделах объясняется, как с помощью диспетчера пакетов SDK подготовить среду разработки для уровней API, которые вы хотите ориентировать, а затем подробно объяснить, как настроить *целевую платформу*, *минимальную версию Android* и *целевые параметры версии Android* в Xamarin. Android.

### <a name="android-sdk-platforms"></a>Платформы пакет SDK для Android

Прежде чем можно будет выбрать целевой или минимальный уровень API в Xamarin. Android, необходимо установить пакет SDK для Android версию платформы, соответствующую этому уровню API. Диапазон доступных вариантов для целевой платформы, минимальной версии Android и целевой версии Android ограничен диапазоном установленных версий пакет SDK для Android. С помощью диспетчера пакетов SDK можно проверить, установлены ли требуемые версии пакет SDK для Android, и можно использовать ее для добавления новых уровней API, необходимых для приложения. Если вы не знакомы с установкой уровней API, см. раздел [пакет SDK для Android Setup](~/android/get-started/installation/android-sdk.md).

<a name="framework"></a>

### <a name="target-framework"></a>Требуемая версия .NET Framework

*Целевая платформа* (также известная как `compileSdkVersion` ) — это конкретная версия платформы Android (уровень API), для которой компилируется приложение во время сборки. Этот параметр указывает, какие API- *интерфейсы будет использовать приложение при* его запуске, но не влияет на то, какие API фактически доступны для приложения при его установке. В результате изменение параметра целевой платформы не приводит к изменению поведения среды выполнения.

Целевая платформа определяет, какие версии библиотек, с которыми связано приложение, &ndash; определяет, какие интерфейсы API можно использовать в приложении. Например, если вы хотите использовать метод [нотификатионбуилдер. сеткатегори](xref:Android.App.Notification.Builder.SetCategory*) , который появился в интерфейсе программирования Android 5,0, необходимо задать целевую платформу на **уровне API 21 (без описания операций)** или более поздней версии. Если задать для целевой платформы проекта уровень API, такой как **API уровня 19 (KitKat)** , и попытаться вызвать `SetCategory` метод в коде, возникнет ошибка компиляции.

Рекомендуется всегда компилироваться с *последней* доступной версией целевой платформы. Это позволяет получить полезные предупреждения для всех устаревших интерфейсов API, которые могут быть вызваны кодом. Использование последней версии целевой платформы особенно важно при использовании последних версий библиотеки поддержки &ndash; . Каждая библиотека предполагает, что приложение должно быть скомпилировано на уровне API службы поддержки или выше.

# <a name="visual-studio"></a>[Visual Studio](#tab/windows)

Чтобы получить доступ к параметру целевой платформы в Visual Studio, откройте свойства проекта в **Обозреватель решений** и выберите страницу **приложения** :

[![Страница "приложение" в свойствах проекта](android-api-levels-images/vs-target-framework-sml.png)](android-api-levels-images/vs-target-framework.png#lightbox)

Задайте целевую платформу, выбрав уровень API в раскрывающемся меню в разделе **компилировать с использованием версии Android** , как показано выше.

# <a name="visual-studio-for-mac"></a>[Visual Studio для Mac](#tab/macos)

Чтобы получить доступ к параметру целевой платформы в Visual Studio для Mac, щелкните правой кнопкой мыши имя проекта и выберите пункт **Параметры**. Откроется диалоговое окно **Параметры проекта** . В этом диалоговом окне перейдите в раздел **Build > General (общие** ), как показано ниже:

[![Раздел "Общие" сборки на странице параметров проекта](android-api-levels-images/xs-target-framework-sml.png)](android-api-levels-images/xs-target-framework.png#lightbox)

Задайте целевую платформу, выбрав уровень API в раскрывающемся меню справа от **целевой платформы** , как показано выше.

-----

<a name="minimum"></a>

### <a name="minimum-android-version"></a>Минимальная версия Android

*Минимальная версия Android* (также известная как `minSdkVersion` ) — это самая старая версия ОС Android (то есть самый низкий уровень API), которая может установить и запустить приложение. По умолчанию приложение может быть установлено только на устройствах, соответствующих параметру целевой платформы или выше. Если минимальная версия *Android меньше, чем* Целевая платформа, приложение также может работать в более ранних версиях Android. Например, если задать в качестве целевой платформы **android 7,1 (Nougat)** и установить для минимальной версии Android значение **Android 4.0.3 (Ice-Южные Сандвичевы)**, приложение можно установить на любой платформе с уровня API 15 на уровень API 25 включительно.

Несмотря на то, что приложение может успешно создаваться и устанавливаться на этом диапазоне платформ, это не гарантирует, что он будет успешно *запущен* на всех этих платформах. Например, если приложение установлено в **android 5,0 (без описания операций)** и код вызывает API, доступный только в **Android 7,1 (Nougat)** и более поздней версии, приложение получит ошибку во время выполнения и, возможно, приведет к сбою. Поэтому код должен гарантировать &ndash; , что во время выполнения &ndash; будут вызываться только те интерфейсы API, которые поддерживаются устройством Android, на котором оно выполняется. Иными словами, код должен включать явные проверки среды выполнения, чтобы гарантировать, что приложение использует более новые API только на тех устройствах, которые достаточно актуальны для их поддержки.
[Проверка среды выполнения для версий Android](#runtimechecks)далее в этом руководство объясняет, как добавить эти проверки среды выполнения в код.

# <a name="visual-studio"></a>[Visual Studio](#tab/windows)

Чтобы получить доступ к параметру минимальной версии Android в Visual Studio, откройте свойства проекта в **Обозреватель решений** и выберите страницу **манифеста Android** . В раскрывающемся меню в разделе **Минимальная версия Android** можно выбрать минимальную версию Android для приложения:

[![Параметр минимальной настройки Android в целевой объект для компиляции с использованием версии пакета SDK](android-api-levels-images/vs-minimum-version-sml.png)](android-api-levels-images/vs-minimum-version.png#lightbox)

Если выбрать параметр **использовать компиляцию с использованием версии пакета SDK**, минимальная версия Android будет совпадать с целевой платформой.

# <a name="visual-studio-for-mac"></a>[Visual Studio для Mac](#tab/macos)

Чтобы получить доступ к минимальной версии Android в Visual Studio для Mac, щелкните правой кнопкой мыши имя проекта и выберите пункт **Параметры**. Откроется диалоговое окно **Параметры проекта** . Перейдите к **сборке > приложение Android**.
С помощью раскрывающегося меню справа от **минимальной версии Android** можно задать минимальную версию Android для приложения:

[![Минимальная версия Android, настроенная для автоматического использования целевой версии .NET Framework](android-api-levels-images/xs-minimum-version-sml.png)](android-api-levels-images/xs-minimum-version.png#lightbox)

При выборе параметра **автоматически &ndash; использовать целевую версию платформы** минимальная версия Android будет совпадать с целевой платформой.

-----

<a name="target"></a>

### <a name="target-android-version"></a>Целевая версия Android

*Целевая версия Android* (также известная как `targetSdkVersion` ) — это уровень API устройства Android, на котором должно выполняться приложение. Android использует этот параметр, чтобы определить, следует ли включить любое поведение совместимости &ndash; . Это гарантирует, что приложение продолжит работать так, как вы планируете. Android использует параметр целевой версии Android приложения, чтобы определить, какие изменения поведения можно применить к приложению без его нарушения (это то, как Android обеспечивает прямую совместимость).

Целевая платформа и Целевая версия Android с очень похожими именами не совпадают. Параметр целевой платформы передает сведения о целевом уровне API в Xamarin. Android для использования во *время компиляции*, а Целевая версия Android передает сведения о ЦЕЛЕВом интерфейсе API в Android для использования во *время выполнения* (если приложение установлено и выполняется на устройстве).

# <a name="visual-studio"></a>[Visual Studio](#tab/windows)

Чтобы получить доступ к этому параметру в Visual Studio, откройте свойства проекта в **Обозреватель решений** и выберите страницу **манифеста Android** . В раскрывающемся меню в разделе **Целевая версия Android** можно выбрать целевую версию Android для приложения:

[![Целевая версия Android, заданная для компиляции с использованием версии пакета SDK](android-api-levels-images/vs-target-version-sml.png)](android-api-levels-images/vs-target-version.png#lightbox)

Рекомендуется явно указать в качестве целевой версии Android последнюю версию Android, используемую для тестирования приложения. В идеале следует установить последнюю версию пакет SDK для Android &ndash; . Это позволяет использовать новые API-интерфейсы до начала работы с изменениями поведения. Для большинства разработчиков *не* рекомендуется задавать в качестве целевой версии Android **Использование функции Compile с использованием версии пакета SDK**.

# <a name="visual-studio-for-mac"></a>[Visual Studio для Mac](#tab/macos)

Чтобы получить доступ к этому параметру в Visual Studio для Mac, щелкните правой кнопкой мыши имя проекта и выберите пункт **Параметры**. Откроется диалоговое окно **Параметры проекта** . Перейдите к **сборке > приложение Android**. С помощью раскрывающегося меню справа от **целевой версии Android** можно задать целевую версию Android для приложения:

[![Целевая версия Android настроена для автоматического использования целевой версии .NET Framework](android-api-levels-images/xs-target-version-sml.png)](android-api-levels-images/xs-target-version.png#lightbox)

Рекомендуется явно указать в качестве целевой версии Android последнюю версию Android, используемую для тестирования приложения. В идеале следует установить последнюю доступную версию пакет SDK для Android &ndash; . Это позволит использовать новые API-интерфейсы до начала работы с изменениями поведения. Для большинства разработчиков не рекомендуется устанавливать целевую версию Android для **автоматического использования целевой версии .NET Framework**.

-----

В общем случае целевая версия Android должна быть ограничена минимальной версией Android и целевой платформой. Это означает следующее:

**Минимальная версия Android <= Целевая версия Android <= Целевая платформа**

Дополнительные сведения об уровнях пакета SDK см. в документации разработчика Android с [помощью пакета SDK](https://developer.android.com/guide/topics/manifest/uses-sdk-element.html) .

<a name="runtimechecks"></a>

## <a name="runtime-checks-for-android-versions"></a>Проверки среды выполнения для версий Android

После выпуска каждой новой версии Android API платформы обновляется для предоставления новых или замещающих функций. За некоторыми исключениями, функциональные возможности API из предыдущих версий Android переносятся в более новые версии Android без изменений. В результате, если приложение работает на определенном уровне API Android, оно, как правило, будет работать на более позднем уровне API Android без изменений. Но что делать, если вы также хотите запустить приложение в более ранних версиях Android?

При выборе минимальной версии Android, которая *ниже* целевой платформы, некоторые API могут быть недоступны приложению во время выполнения. Однако приложение по-прежнему может работать на более раннем устройстве, но с ограниченной функциональностью. Для каждого API, который недоступен на платформах Android, соответствующих параметру минимальной версии Android, код должен явно проверить значение свойства, `Android.OS.Build.VERSION.SdkInt` чтобы определить уровень API платформы, в которой работает приложение. Если уровень *API меньше, чем минимальная* версия Android, поддерживающая API, которую нужно вызвать, то код должен найти способ правильной работы без выполнения этого вызова API.

Например, предположим, что мы хотим использовать метод [нотификатионбуилдер. сеткатегори](xref:Android.App.Notification.Builder.SetCategory*) для категоризации уведомлений при работе в программной интерфейсной системе **Android 5,0** (и более поздних версиях), но мы по-прежнему хотим, чтобы наше приложение выполнялось в более ранних версиях android, например **Android 4,1 Jelly Bean** (где `SetCategory` недоступно). Ссылка на таблицу версий Android в начале этого руководством, мы видим, что код версии сборки для **Android 5,0 без описания операций** `Android.OS.BuildVersionCodes.Lollipop` . Для поддержки старых версий Android, где `SetCategory` недоступен, наш код может определить уровень API во время выполнения и условно вызывать его `SetCategory` только в том случае, если уровень API больше или равен коду версии сборки без описания операций:

```csharp
if (Android.OS.Build.VERSION.SdkInt >= Android.OS.BuildVersionCodes.Lollipop)
{
    builder.SetCategory(Notification.CategoryEmail);
}
```

В этом примере для нашей целевой платформы приложения задано значение **android 5,0 (API уровня 21)** , а для минимальной версии Android — **Android 4,1 (уровень API 16)**. Так как доступен `SetCategory` на уровне API `Android.OS.BuildVersionCodes.Lollipop` и более поздней версии, этот пример кода будет вызывать `SetCategory` только в том случае, если он действительно доступен, &ndash; он *не* будет пытаться вызывать, `SetCategory` когда уровень API равен 16, 17, 18, 19 или 20. Эта функция в предыдущих версиях Android сокращается только до того экстента, в котором уведомления не сортируются должным образом (так как они не классифицируются по типу), но уведомления по-прежнему публикуются для оповещения пользователя. Наше приложение по-прежнему работает, но его функциональные возможности немного уменьшаются.

Как правило, проверка версии сборки помогает вашему коду принимать во время выполнения действия по сравнению со старым способом. Пример:

```csharp
if (Android.OS.Build.VERSION.SdkInt >= Android.OS.BuildVersionCodes.Lollipop)
{
    // Do things the Lollipop way
}
else
{
    // Do things the pre-Lollipop way
}
```

Нет быстрого и простого правила, объясняющих, как сократить или изменить функциональность приложения при запуске в более старых версиях Android, в которых отсутствует один или несколько API-интерфейсов. В некоторых случаях (например, в приведенном `SetCategory` выше примере) достаточно опустить вызов API, если он недоступен. Однако в других случаях может потребоваться реализовать альтернативную функциональность, когда `Android.OS.Build.VERSION.SdkInt` обнаруживается меньше уровня API, необходимого приложению для обеспечения его оптимального взаимодействия.

<a name="libraries"></a>

## <a name="api-levels-and-libraries"></a>Уровни API и библиотеки

# <a name="visual-studio"></a>[Visual Studio](#tab/windows)

При создании проекта библиотеки Xamarin. Android (например, библиотеки классов или библиотеки привязок) можно настроить только целевую платформу. &ndash; параметры минимальной версии Android и целевой версии Android недоступны. Это связано с тем, что отсутствует страница **манифеста Android** :

[![Доступна только функция компиляции с использованием версии Android](android-api-levels-images/vs-library-options-sml.png)](android-api-levels-images/vs-library-options.png#lightbox)

# <a name="visual-studio-for-mac"></a>[Visual Studio для Mac](#tab/macos)

При создании проекта библиотеки Xamarin. Android отсутствует страница **приложения Android** , на которой можно настроить минимальную версию Android и целевую версию Android &ndash; . Минимальная версия Android и Целевая версия Android недоступны.
Это связано с тем, что отсутствует страница **сборки > приложение Android** :

[![Общая страница сборки без параметров минимальной и целевой версий](android-api-levels-images/xs-library-options-sml.png)](android-api-levels-images/xs-library-options.png#lightbox)

-----

Параметры минимальной версии Android и целевой версии Android недоступны, так как итоговая библиотека не является автономным приложением, &ndash; Библиотека может быть запущена в любой версии Android в зависимости от приложения, с которым оно упаковано. Можно указать способ *компиляции* библиотеки, но нельзя предсказать, на каком уровне API платформы будет выполняться библиотека. Учитывая это, при использовании или создании библиотек следует соблюдать следующие рекомендации.

- **При использовании библиотеки Android** &ndash; Если вы используете библиотеку Android в приложении, не забудьте задать для параметра целевой платформы приложения уровень API, который не меньше максимального значения, *чем* Целевая платформа библиотеки.

- **При создании библиотеки Android** &ndash; Если вы создаете библиотеку Android для использования другими приложениями, убедитесь, что для параметра целевой платформы задан минимальный уровень API, необходимый для компиляции.

Эти рекомендации рекомендуется использовать для предотвращения ситуации, когда библиотека пытается вызвать API, который недоступен во время выполнения (что может привести к сбою приложения). Если вы разработчик библиотеки, вам следует ограничить использование вызовов API небольшим и хорошо установленным подмножеством общей контактной зоны API. Это гарантирует, что библиотеку можно будет использовать в более широком диапазоне версий Android.

## <a name="summary"></a>Сводка

В этом руководство объясняется, как уровни API Android используются для управления совместимостью приложений в разных версиях Android. В нем содержатся подробные инструкции по настройке *целевого платформы* Xamarin. Android, *минимальной версии Android* и параметров проекта *целевой версии Android* . В нем предоставлены инструкции по использованию диспетчера пакет SDK для Android для установки пакетов SDK, включая примеры написания кода для работы с различными уровнями API во время выполнения, а также объясняется, как управлять уровнями API при создании или использовании библиотек Android. Он также предоставляет исчерпывающий список, который связывает уровни API с номерами версий Android (например, Android 4,4), именами версий Android (например, KitKat) и кодами версий сборки Xamarin. Android.

## <a name="related-links"></a>Связанные ссылки

- [Установка пакета SDK для Android](~/android/get-started/installation/android-sdk.md)
- [Изменения средств интерфейса командной строки SDK](~/android/troubleshooting/sdk-cli-tooling-changes.md)
- [Подбор параметров compilesdkversion, minSdkVersion и targetSdkVersion](https://medium.com/google-developers/picking-your-compilesdkversion-minsdkversion-targetsdkversion-a098a0341ebd)
- [Что такое уровень API?](https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels)
- [Коденамес, теги и номера сборки](https://source.android.com/source/build-numbers)
