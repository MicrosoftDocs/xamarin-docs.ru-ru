---
title: Отображение изображения в Xamarin. iOS
description: В этой статье описывается включение ресурса изображения в приложение Xamarin. iOS и отображение этого изображения либо с помощью кода C#, либо путем присвоения его элементу управления в конструкторе iOS.
ms.prod: xamarin
ms.assetid: 60288B12-49E3-4E87-8690-D04A5EC7A664
ms.technology: xamarin-ios
author: davidortinau
ms.author: daortin
ms.date: 04/24/2018
ms.openlocfilehash: a7bc2b87e267e78d841217b7860e5d54c046b788
ms.sourcegitcommit: d7c09c6cc2f479b8f14910ad2d20ec76800cd9c7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/25/2020
ms.locfileid: "91248143"
---
# <a name="displaying-an-image-in-xamarinios"></a>Отображение изображения в Xamarin. iOS

_В этой статье описывается включение ресурса изображения в приложение Xamarin. iOS и отображение этого изображения либо с помощью кода C#, либо путем присвоения его элементу управления в конструкторе iOS._

## <a name="adding-and-organizing-images-in-a-xamarinios-app"></a>Добавление и упорядочение изображений в приложении Xamarin. iOS

При добавлении образа для использования в приложении Xamarin. iOS разработчик будет использовать _Каталог активов_ для поддержки каждого устройства iOS и разрешения, требуемого для приложения.

Добавленные в iOS 7 **наборы образов для каталогов активов** содержат все версии или представления образа, необходимые для поддержки различных устройств и коэффициентов масштабирования для приложения. Вместо того чтобы полагаться на имя файла ресурсов образа, **наборы образов** используют JSON-файл, чтобы указать, какой образ принадлежит устройству или разрешению. Это предпочтительный способ управления и поддержки изображений в iOS (с iOS 9 или более поздней версии).

## <a name="adding-images-to-an-asset-catalog-image-set"></a>Добавление изображений в набор изображений каталога активов

Как указано выше, **наборы изображений каталога активов** содержат все версии или представления образа, необходимые для поддержки различных устройств и коэффициентов масштабирования для приложения. Вместо того чтобы полагаться на имя файла ресурсов образа, **наборы образов** используют JSON-файл, чтобы указать, какой образ принадлежит устройству или разрешению.

Чтобы создать новый набор изображений и добавить в него изображения, выполните следующие действия.

# <a name="visual-studio-for-mac"></a>[Visual Studio для Mac](#tab/macos)

1. В **Обозреватель решений**дважды щелкните `Assets.xcassets` файл, чтобы открыть его для редактирования:

    ![Ресурсы Assets. xcassets в обозреватель решений](displaying-an-image-images/imageset01.png)
2. Щелкните правой кнопкой мыши **список активы** и выберите **создать набор изображений**:

    ![Добавление нового набора изображений](displaying-an-image-images/imageset02.png)
3. Выберите новый набор изображений, и откроется редактор:

    ![Редактор набора изображений](displaying-an-image-images/imageset03.png)
4. Здесь можно перетащить изображения для каждого из различных устройств и необходимых разрешений.
5. Дважды щелкните **имя** нового набора изображений в **списке ресурсов** , чтобы изменить его: ![ изменение имени нового набора изображений](displaying-an-image-images/imageset04.png)

При использовании **набора изображений** в конструкторе iOS просто выберите имя набора из раскрывающегося списка в редакторе свойств:

![Выберите имя набора изображений из раскрывающегося списка](displaying-an-image-images/imageset06.png)

# <a name="visual-studio"></a>[Visual Studio](#tab/windows)

1. Откройте каталог активов из **Обозреватель решений**и в левом верхнем углу нажмите кнопку **со знаком «плюс** »:

    ![Нажмите кнопку «плюс»](displaying-an-image-images/asset5.png)

2. Выберите **Добавить набор изображений** , и откроется редактор набора изображений для нового набора изображений. Здесь можно перетащить изображения для каждого из различных устройств и необходимых разрешений.

    ![Редактор набора изображений](displaying-an-image-images/asset7.png)

### <a name="renaming-an-image-set"></a>Переименование набора изображений

Чтобы переименовать набор изображений, выполните следующие действия.

1. В **Обозреватель решений**дважды щелкните файл **каталога активов** , чтобы открыть его для редактирования:

    ![Каталог активов в обозреватель решений](displaying-an-image-images/rename01.png)
2. Выберите **набор изображений** для переименования:

    ![Выберите набор изображений для переименования](displaying-an-image-images/rename02.png)
3. В **обозревателе свойств**прокрутите вниз и выберите **имя**(в разделе **Прочие** ):

    ![Выберите имя в разделе "Прочие".](displaying-an-image-images/rename03.png)
4. Введите новое **имя** **набора изображений** и сохраните изменения.

-----

При использовании **набора изображений** в коде сослаться на него по имени, вызвав `FromBundle` метод `UIImage` класса. Пример:

```csharp
MonkeyImage.Image = UIImage.FromBundle ("PurpleMonkey");
```

> [!IMPORTANT]
> Если изображения, назначенные набору изображений, отображаются неправильно, убедитесь, что используется правильное имя файла с `FromBundle` методом ( **набор изображений** , а не имя родительского **каталога активов** ). Для изображений PNG `.png` расширение можно опустить. Для других форматов изображений требуется расширение (например, `PurpleMonkey.jpg`).

### <a name="using-vector-images-in-asset-catalogs"></a>Использование векторных изображений в каталогах активов

Начиная с iOS 8 в **наборы изображений** добавлен специальный класс **vector** , позволяющий разработчику включать в кассету изображение в формате **PDF** в качестве, в том числе отдельные файлы точечных рисунков с разными разрешениями. Используя этот метод, предоставьте один векторный файл для `@1x` разрешения (в формате векторного PDF-файла), а `@2x` `@3x` версии и файла будут созданы во время компиляции и включены в пакет приложения.

# <a name="visual-studio-for-mac"></a>[Visual Studio для Mac](#tab/macos)

![Векторные изображения в редакторе каталогов активов](displaying-an-image-images/imageset05.png)

# <a name="visual-studio"></a>[Visual Studio](#tab/windows)

![Векторные изображения в редакторе каталогов активов](displaying-an-image-images/asset8.png)

-----

Например, если разработчик включает `MonkeyIcon.pdf` файл в качестве вектора каталога активов с разрешением 150px x 150px, следующие ресурсы растрового изображения будут включены в окончательный набор приложений при компиляции:

- `MonkeyIcon@1x.png` -150px x 150px разрешение.
- `MonkeyIcon@2x.png` -300 пикселей x 300 пикселей разрешение.
- `MonkeyIcon@3x.png` -450px x 450px разрешение.

При использовании векторных изображений PDF в каталогах активов следует учитывать следующее:

- Это не полная поддержка вектора, так как PDF-файл будет располагаться в растровом изображении во время компиляции и поставляются в окончательном приложении.
- Размер образа нельзя изменить после его настройки в каталоге активов. Если разработчик пытается изменить размер изображения (в коде или с помощью классов автоматической разметки и размера), изображение будет искажено так же, как и любой другой точечный рисунок.
- Каталоги активов совместимы только с iOS 7 и более поздних версий. Если приложению требуется поддержка iOS 6 или более низкого уровня, он не сможет использовать каталоги активов.

## <a name="working-with-template-images"></a>Работа с образами шаблонов

В зависимости от структуры приложения для iOS иногда разработчику нужно настроить значок или изображение в пользовательском интерфейсе в соответствии с изменениями цветовой схемы (например, в зависимости от настроек пользователя).

Чтобы легко достичь этого результата, переключите _режим рендеринга_ ресурса изображения на **образ шаблона**:

# <a name="visual-studio-for-mac"></a>[Visual Studio для Mac](#tab/macos)

[![Режим рендеринга, настроенный на изображение шаблона](displaying-an-image-images/templateimage01.png)](displaying-an-image-images/templateimage01.png#lightbox)

# <a name="visual-studio"></a>[Visual Studio](#tab/windows)

[![Режим рендеринга, настроенный на шаблон](displaying-an-image-images/templateimage01vs.png)](displaying-an-image-images/templateimage01vs.png#lightbox)

-----

В конструкторе iOS назначьте ресурс изображения элементу управления пользовательского интерфейса, а затем установите **оттенок** для выделения изображения.

# <a name="visual-studio-for-mac"></a>[Visual Studio для Mac](#tab/macos)

[![Установка цвета оттенка для выделения изображения](displaying-an-image-images/templateimage03.png)](displaying-an-image-images/templateimage03.png#lightbox)

# <a name="visual-studio"></a>[Visual Studio](#tab/windows)

[![Установка цвета оттенка для выделения изображения](displaying-an-image-images/templateimage03vs.png)](displaying-an-image-images/templateimage03vs.png#lightbox)

-----

Кроме того, ресурс изображения и оттенок можно задать непосредственно в коде:

```csharp
MyIcon.Image = UIImage.FromBundle ("MessageIcon");
MyIcon.TintColor = UIColor.Red;
```

Чтобы полностью использовать образ шаблона из кода, выполните следующие действия.

```csharp
if (MyIcon.Image != null) {
    var mutableImage = MyIcon.Image.ImageWithRenderingMode (UIImageRenderingMode.AlwaysTemplate);
    MyIcon.Image = mutableImage;
    MyIcon.TintColor = UIColor.Red;
}
```

Поскольку `RenderMode` свойство объекта `UIImage` доступно только для чтения, используйте метод, `ImageWithRenderingMode` чтобы создать новый экземпляр изображения с требуемым параметром режима рендеринга.

Существует три возможных параметра `UIImage.RenderMode` с помощью `UIImageRenderingMode` перечисления:

- `AlwaysOriginal` — Принудительное отображение изображения в качестве исходного файла исходного изображения без каких-либо изменений.
- `AlwaysTemplate` — Принудительное отображение изображения в виде шаблона путем выделения цветом пикселов указанного `Tint` цвета.
- `Automatic` — Отображает изображение в виде шаблона или исходного файла в зависимости от среды, в которой он используется. Например, если изображение используется в `UIToolBar` , `UINavigationBar` `UITabBar` или `UISegmentControl` будет рассматриваться как шаблон.

## <a name="adding-new-assets-collections"></a>Добавление новых коллекций активов

При работе с изображениями в каталогах активов могут возникнуть ситуации, когда потребуется новая коллекция, а не все образы приложения в `Assets.xcassets` коллекцию. Например, при проектировании ресурсов по запросу.

Чтобы добавить новый каталог ресурсов в проект, выполните следующие действия.

# <a name="visual-studio-for-mac"></a>[Visual Studio для Mac](#tab/macos)

1. Щелкните правой кнопкой мыши **имя проекта** в **Обозреватель решений** и выберите **добавить**  >  **новый файл...**
2. Выберите **iOS**  >  **Каталог ресурсов**iOS, введите **имя** коллекции и нажмите кнопку **создать** :

    ![Создание нового каталога активов](displaying-an-image-images/asset01.png)

# <a name="visual-studio"></a>[Visual Studio](#tab/windows)

1. В обозреватель решений щелкните правой кнопкой мыши папку **каталоги активов** и выберите **Добавить > новый каталог ресурсов**.
2. Присвойте ему имя и нажмите кнопку **Добавить**:

    ![Создание нового каталога активов](displaying-an-image-images/asset1.png)

-----

Отсюда коллекцию можно обрабатывать таким же образом, как и коллекция по умолчанию, `Assets.xcassets` автоматически включаемая в проект.

## <a name="using-images-with-controls"></a>Использование изображений с элементами управления

Кроме использования образов для поддержки приложения, iOS также использует изображения с такими типами элементов управления приложений, как панели вкладок, панели инструментов, панели навигации, таблицы и кнопки. Простой способ создания изображения в элементе управления — назначение `UIImage` экземпляра `Image` свойству элемента управления.

### <a name="frombundle"></a>фромбундле

`FromBundle`Вызов метода — это синхронный (блокирующий) вызов, который имеет ряд встроенных функций загрузки и управления изображениями, таких как поддержка кэширования и автоматическая обработка файлов изображений для различных решений.

В следующем примере показано, как задать изображение объекта `UITabBarItem` в `UITabBar` :

```csharp
TabBarItem.Image = UIImage.FromBundle ("MyImage");
```

Предполагается, что `MyImage` это имя ресурса образа, добавляемого в каталог активов выше. При работе с образами каталога активов просто укажите имя набора изображений в `FromBundle` методе для изображений в формате **PNG** :

```csharp
TabBarItem.Image = UIImage.FromBundle ("MyImage");
```

Для любого другого формата изображения Включите расширение с именем. Пример:

```csharp
TabBarItem.Image = UIImage.FromBundle ("MyImage.jpg");
```

Дополнительные сведения о значках и изображениях см. в документации Apple о [пользовательских значках и руководстве по созданию изображений](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html).

## <a name="displaying-an-image-in-a-storyboard"></a>Отображение изображения в раскадровке

После добавления образа в проект Xamarin. iOS с помощью каталогов активов его можно легко отобразить в раскадровке с помощью элемента `UIImageView` в конструкторе iOS. Например, если был добавлен следующий ресурс изображения:

# <a name="visual-studio-for-mac"></a>[Visual Studio для Mac](#tab/macos)

![Добавлен образец ресурса изображения](displaying-an-image-images/display01.png)

Чтобы отобразить его в раскадровке, выполните следующие действия:

1. Дважды щелкните `Main.storyboard` файл в **Обозреватель решений** , чтобы открыть его для редактирования в конструкторе iOS.
2. Выберите **представление изображения** из **области элементов**:

     ![Выбор представления изображения из панели элементов](displaying-an-image-images/display02.png)
3. Перетащите представление изображения в область конструктора и установите его расположение и размер по мере необходимости:

    ![Новое представление изображений на область конструктора](displaying-an-image-images/display03.png)
4. В разделе **мини** -приложения в **обозревателе свойств** выберите нужный ресурс **изображения** .

    ![Выберите нужный ресурс изображения для отображения](displaying-an-image-images/display04.png)
5. В разделе " **представление** " используйте **режим** , чтобы управлять изменением размера изображения при изменении размера **представления изображения** .
6. Выбрав **представление изображения** , щелкните его еще раз, чтобы добавить **ограничения**:

    ![Добавление ограничений](displaying-an-image-images/display05.png)
7. Перетащите маркер "T" на каждом крае **представления изображения** на соответствующую сторону экрана, чтобы "закрепить" изображение на сторонах. Таким образом, **представление изображений** будет сжиматься и увеличиваться при изменении размера экрана.
8. Сохраните изменения в раскадровке.

# <a name="visual-studio"></a>[Visual Studio](#tab/windows)

![Добавлен образец ресурса изображения](displaying-an-image-images/display01vs.png)

Чтобы отобразить его в раскадровке, выполните следующие действия:

1. Дважды щелкните `Main.storyboard` файл в **Обозреватель решений** , чтобы открыть его для редактирования в конструкторе iOS.
2. Выберите **представление изображения** из **области элементов**:

     ![Выбор представления изображения из панели элементов](displaying-an-image-images/display02vs.png)
3. Перетащите представление изображения в область конструктора и установите его расположение и размер по мере необходимости:

    ![Новое представление изображений на область конструктора](displaying-an-image-images/display03vs.png)
4. В разделе **мини** -приложения в **обозревателе свойств** выберите нужный ресурс **изображения** .

    ![Выберите нужный ресурс изображения для отображения](displaying-an-image-images/display04vs.png)
5. В разделе " **представление** " используйте **режим** , чтобы управлять изменением размера изображения при изменении размера **представления изображения** .
6. Выбрав **представление изображения** , щелкните его еще раз, чтобы добавить **ограничения**:

    ![Добавление ограничений](displaying-an-image-images/display05vs.png)
7. Перетащите маркер "T" на каждом крае **представления изображения** на соответствующую сторону экрана, чтобы "закрепить" изображение на сторонах. Таким образом, **представление изображений** будет сжиматься и увеличиваться при изменении размера экрана.
8. Сохраните изменения в раскадровке.

-----

## <a name="displaying-an-image-in-code"></a>Отображение изображения в коде

Как и при отображении изображения в раскадровке, после добавления изображения в проект Xamarin. iOS с помощью каталогов активов его можно легко отобразить с помощью кода C#.

Возьмем следующий пример:

```csharp
// Create an image view that will fill the
// parent image view and set the image from
// an Image Asset

var imageView = new UIImageView (View.Frame);
imageView.Image = UIImage.FromBundle ("Kemah");

// Add the Image View to the parent view
View.AddSubview (imageView);
```

Этот код создает новый объект `UIImageView` и присваивает ему исходный размер и расположение. Затем он загружает изображение из ресурса изображения, добавленного в проект, и добавляет его `UIImageView` к родительскому элементу, `UIView` чтобы отобразить его.

## <a name="related-links"></a>Связанные ссылки

- [Работа с изображениями (пример)](https://docs.microsoft.com/samples/xamarin/ios-samples/workingwithimages)
- [Привет, iPhone](~/ios/get-started/hello-ios/index.md)
- [Размер и разрешение изображения (Apple)](https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/image-size-and-resolution/)
