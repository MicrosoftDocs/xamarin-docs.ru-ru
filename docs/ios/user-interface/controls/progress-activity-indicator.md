---
title: Индикаторы хода выполнения и активности в Xamarin. iOS
description: В этом документе рассматривается использование индикаторов хода выполнения и активности в Xamarin. iOS. В нем описывается, как использовать их как программно, так и с помощью раскадровки.
ms.prod: xamarin
ms.assetid: 7AA887E4-51F7-4867-82C5-A8D2EA48AE07
ms.technology: xamarin-ios
author: davidortinau
ms.author: daortin
ms.date: 07/11/2017
ms.openlocfilehash: 0bfb4168e3d990ae1afb3ee2022553053c383083
ms.sourcegitcommit: 513feb0e07558766e3de4a898e53d56b27c20559
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/22/2021
ms.locfileid: "98697596"
---
# <a name="progress-and-activity-indicators-in-xamarinios"></a>Индикаторы хода выполнения и активности в Xamarin. iOS

Вполне вероятно, что приложению придется выполнять длительные задачи, такие как загрузка или обработка данных, и что эта задержка может вызвать задержку при обновлении пользовательского интерфейса. В течение этого времени следует всегда использовать индикатор выполнения, чтобы убедиться в том, что система занята. Это дает пользователю контроль над тем, что приложение работает над своим запросом, что оно не ожидает ввода данных, и может предоставить подробные сведения о том, как долго они должны ждать.

iOS предоставляет два основных способа предоставления индикатора хода выполнения в приложении: Индикаторы действий (включая конкретный индикатор активности _сети_ ) и индикаторы выполнения.

## <a name="activity-indicator"></a>Индикатор активности

Индикаторы действий должны отображаться, когда приложение выполняет длительный процесс, но неизвестно точное время, которое потребуется задаче.

В Apple имеются следующие рекомендации по работе с индикаторами действий.

- По **возможности используйте индикаторы выполнения,** так как индикатор действия дает пользователю никаких отзывов о том, как долго выполняется процесс, и всегда используйте индикатор выполнения, если длина известна (например, количество байтов для загрузки в файле).
- **Сохранение индикатора анимированных** — пользователи связывают стационарный индикатор активности с остановленным приложением, поэтому индикатор должен быть анимирован во время его отображения.
- **Опишите обрабатываемую задачу** . просто отображение индикатора активности само по себе не является достаточным, пользователь должен сообщить о том, какой процесс ожидает. Включите осмысленную метку (как правило, одно выражение), которая четко определяет задачу.

### <a name="implementing-an-activity-indicator"></a>Реализация индикатора действия

Индикатор действия реализуется через класс, [`UIActivityIndictorView`](xref:UIKit.UIActivityIndicatorView) чтобы указать, что `UIActivity` выполняется.

### <a name="activity-indicators-and-storyboards"></a>Индикаторы действий и раскадровки

Если вы используете конструктор iOS для создания пользовательского интерфейса, индикатор действия можно добавить в макет из панели элементов. Следующие свойства можно изменить с Панель свойств:

![На снимке экрана показан Панель свойств, где можно изменить свойства стиля, цвета и поведения.](progress-activity-indicator-images/progress-indicator1.png)

### <a name="managing-activity-indicator-behavior"></a>Управление поведением индикатора действия

Используйте `StartAnimating()` методы и `StopAnimating()` для запуска и завершения анимации индикатора действия.

Задайте для `HidesWhenStopped` свойства значение `true` , чтобы индикатор действия исчезал после `StopAnimating()` вызова. По умолчанию задано значение `true` . В любой момент можно увидеть, выполняет ли индикатор действия вращающуюся анимацию, проверив `IsAnimating` свойство. 

### <a name="managing-activity-indicator-appearances"></a>Управление внешним видом индикаторов действий

`UIActivityIndicatorViewStyle`Перечисление может быть передано в качестве параметра при создании экземпляра индикатора действия. С помощью этого параметра можно задать для визуального стиля значение `Gray` , `White` или `WhiteLarge` , например:

```csharp
activitySpinner = new UIActivityIndicatorView(UIActivityIndicatorViewStyle.WhiteLarge);
```

Цвет, предоставляемый, можно переопределить `UIActivityIndicatorViewStyle`  , задав `Color` свойство.

## <a name="progress-bar"></a>Progress Bar

Индикатор выполнения представляет собой линию, которая заполняется цветом для указания состояния и длины длительной задачи. Индикаторы выполнения всегда должны использоваться, если длина задач известна или может быть вычислена.

В Apple имеются следующие рекомендации по работе с индикаторами выполнения.

- **Точный отчет** . индикаторы выполнения всегда должны быть точным представлением времени, необходимого для выполнения задачи. Никогда не иным время, чтобы приложение было занято.
- **Использование для Well-Defined длительности** — индикатор выполнения не только показывает, что выполняется длительная задача, но дает пользователю возможность указать, какая часть задачи завершена, и оценить оставшееся время.

### <a name="implementing-an-progress-bar"></a>Реализация индикатора выполнения

Индикатор выполнения создается путем создания экземпляра [`UIProgressView`](xref:UIKit.UIProgressView)

### <a name="progress-bars-and-storyboards"></a>Индикаторы выполнения и раскадровки

При использовании конструктора iOS можно также добавить индикатор выполнения в пользовательский интерфейс. Найдите **представление ход выполнения** на **панели элементов** и перетащите его в представление.

На панели свойств можно настроить следующие свойства:

![На снимке экрана показан Панель свойств, где можно изменить стиль, ход выполнения, оттенок выполнения, оттенок, изображение хода выполнения и свойства отслеживания изображения.](progress-activity-indicator-images/progress-indicator3.png)

### <a name="managing-progress-bar-behavior"></a>Управление поведением индикатора выполнения

Ход выполнения линейки можно изначально задать с помощью `Progress` Свойства:

```csharp
ProgressBar.Progress = 0f;
```

Ход выполнения можно изменить с помощью `SetProgress` метода и передав логическое объявление, если вы хотите, чтобы изменение было анимировано.

```csharp
ProgressBar.SetProgress(1.0f, true);
```

Дополнительные сведения об использовании индикатора выполнения см. в разделе о [ходе выполнения отчетов](https://github.com/xamarin/recipes/tree/master/Recipes/cross-platform/networking/download_progress) и в [примере уикаталог tvOS](/samples/xamarin/ios-samples/tvos-uicatalog).

### <a name="managing-progress-bar-appearance"></a>Управление видом индикатора выполнения

Подобно индикатору действия, `UIProgressViewStyle` перечисление может быть передано в качестве параметра при создании экземпляра индикатора выполнения.

Для изменения хода выполнения и отслеживания изображения и цвета оттенок можно использовать следующие свойства:

```csharp
progressBar = new UIProgressView(UIProgressViewStyle.Default)
            {
                ProgressImage = UIImage.FromBundle("TrackImage"),
                ProgressTintColor = UIColor.Cyan,
                TrackImage = UIImage.FromBundle("TrackImage"),
                TrackTintColor = UIColor.Magenta
            }; 
```