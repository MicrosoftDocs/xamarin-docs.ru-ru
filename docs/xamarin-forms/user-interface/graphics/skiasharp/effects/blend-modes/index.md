---
title: Режимы смешения SkiaSharp
description: Используйте режимы смешения, чтобы определить, что происходит при наложении графических объектов на другой.
ms.prod: xamarin
ms.technology: xamarin-skiasharp
ms.assetid: CE1B222E-A2D0-4016-A532-EC1E59EE3D6B
author: davidbritch
ms.author: dabritch
ms.date: 08/23/2018
no-loc:
- Xamarin.Forms
- Xamarin.Essentials
ms.openlocfilehash: 1c345edf4c9980497d1fcd877a9142819afa9b56
ms.sourcegitcommit: ebdc016b3ec0b06915170d0cbbd9e0e2469763b9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/05/2020
ms.locfileid: "93368652"
---
# <a name="skiasharp-blend-modes"></a>Режимы смешения SkiaSharp

[![Загрузить образец](~/media/shared/download.png) загрузить пример](/samples/xamarin/xamarin-forms-samples/skiasharpforms-demos)

В этих статьях основное внимание уделяется [`BlendMode`](xref:SkiaSharp.SKPaint.BlendMode) свойству [`SKPaint`](xref:SkiaSharp.SKPaint) . `BlendMode`Свойство имеет тип [`SKBlendMode`](xref:SkiaSharp.SKBlendMode) , перечисление с 29 элементами.

`BlendMode`Свойство определяет, что происходит, когда графический объект (часто называемый _источником_ ) визуализируется поверх существующих графических объектов (называемых _назначением_ ). Обычно предполагается, что новый графический объект скрывает объекты под ним. Но это происходит только потому, что режимом смешения по умолчанию является, а это `SKBlendMode.SrcOver` означает, что источник _отображается_ в месте назначения. Другие 28 членов `SKBlendMode` вызывают другие эффекты. В программировании графики метод объединения графических объектов различными способами называется _композицией_.

## <a name="the-skblendmodes-enumeration"></a>Перечисление Скблендмодес

Режимы наложения SkiaSharp соответствуют тем, которые описаны в спецификации W3C по [**компоновке и смешению уровня 1**](https://www.w3.org/TR/compositing-1/) . В [**обзоре СКИА скблендмоде**](https://skia.org/user/api/SkBlendMode_Overview) также содержатся полезные фундаментальные сведения. Общие сведения о режимах наложения см. в статье [**режимы смешения**](https://en.wikipedia.org/wiki/Blend_modes) в Википедии — хороший запуск. Режимы смешения поддерживаются в Adobe Photoshop, поэтому в этом контексте имеется множество дополнительных интерактивных сведений о режимах смешения.

29 членов `SKBlendMode` перечисления можно разделить на три категории:

| Porter-Duff | Отделяемых    | Не отделяемых |
| ----------- | ------------ | ------------- |
| `Clear`     | `Modulate`   | `Hue`         |
| `Src`       | `Screen`     | `Saturation`  |
| `Dst`       | `Overlay`    | `Color`       |
| `SrcOver`   | `Darken`     | `Luminosity`  |
| `DstOver`   | `Lighten`    |               |
| `SrcIn`     | `ColorDodge` |               |
| `DstIn`     | `ColorBurn`  |               |
| `SrcOut`    | `HardLight`  |               |
| `DstOut`    | `SoftLight`  |               |
| `SrcATop`   | `Difference` |               |
| `DstATop`   | `Exclusion`  |               |
| `Xor`       | `Multiply`   |               |
| `Plus`      |              |               |

Имена этих трех категорий будут иметь больше смысла в следующих обсуждениях. Порядок, в котором перечислены элементы, совпадает с порядком в определении `SKBlendMode` перечисления. 13 элементов перечисления в первом столбце имеют целочисленные значения от 0 до 12. Второй столбец — это члены перечисления, соответствующие целым числам от 13 до 24, а элементы третьего столбца — значения от 25 до 28.

Эти режимы наложения обсуждаются _примерно_ в одном и том же порядке в документе « **компоновка W3C» и «смешение 1** », но существует несколько отличий: `Src` режим « _Копировать_ » в документе W3C и `Plus` называется _светлее_. Документ W3C определяет _нормальный_ режим наложения, который не входит в состав, `SKBlendModes` так как он будет таким же, как `SrcOver` . `Modulate`Режим наложения (в верхней части первого столбца) не включается в документ W3C и обсуждение `Multiply` режима перед `Screen` .

Поскольку `Modulate` режим Blend уникален для СКИА, он рассматривается как дополнительный Porter-Duffный режим и как режим отделяемых.

## <a name="the-importance-of-transparency"></a>Важность прозрачности

Исторически компоновка была разработана в сочетании с концепцией _альфа-канала_. На экранной поверхности, такой как `SKCanvas` объект и полное цветное изображение, каждая точка состоит из 4 байт: 1 байта для красного, зеленого и синего компонентов и дополнительного байта для прозрачности. Этот альфа-компонент равен 0 для полной прозрачности и 0xFF для полной прозрачности с различными уровнями прозрачности между этими значениями.

Многие режимы наложения основываются на прозрачности. Как правило, при `SKCanvas` первом получении в `PaintSurface` обработчике или при `SKCanvas` создании для рисования на точечном рисунке первым шагом является следующий вызов:

```csharp
canvas.Clear();
```

Этот метод заменяет все пиксели холста прозрачными черными пикселями, эквивалентными `new SKColor(0, 0, 0, 0)` или целым числом 0x00000000. Все байты всех пикселов инициализируются нулем.

Поверхность рисования `SKCanvas` , полученная в `PaintSurface` обработчике, может показаться белым фоном, но это только потому, что у `SKCanvasView` самого себя прозрачный фон, а у страницы есть белый фон. Этот факт можно продемонстрировать самому себе, задав Xamarin.Forms `BackgroundColor` для свойства значение `SKCanvasView` Xamarin.Forms Color:

```csharp
canvasView.BackgroundColor = Color.Red;
```

Или в классе, производном от `ContentPage` , можно задать цвет фона страницы:

```csharp
BackgroundColor = Color.Red;
```

Вы увидите красный фон для графики SkiaSharp, так как сам холст SkiaSharp является прозрачным.

В статье [**SkiaSharp прозрачности**](../../basics/transparency.md) были показаны некоторые основные методы использования прозрачности для упорядочения нескольких изображений в составном изображении. Режимы наложения выходят за рамки, но прозрачность остается решающей для режимов смешения.

## <a name="skiasharp-porter-duff-blend-modes"></a>[SkiaSharp Porter-Duff режимы смешения](porter-duff.md)

Используйте режимы Porter-Duff Blend для создания сцен на основе исходного и целевого образов.

## <a name="skiasharp-separable-blend-modes"></a>[Режимы смешения SkiaSharp отделяемых](separable.md)

Используйте режимы смешения отделяемых для изменения красного, зеленого и синего цветов.

## <a name="skiasharp-non-separable-blend-modes"></a>[Режимы смешения SkiaSharp (не отделяемых)](non-separable.md)

Используйте режимы смешения, отличные от отделяемых, для изменения тона, насыщенности или яркости.

## <a name="related-links"></a>Связанные ссылки

- [API-интерфейсы SkiaSharp](/dotnet/api/skiasharp)
- [Скиашарпформсдемос (пример)](/samples/xamarin/xamarin-forms-samples/skiasharpforms-demos)