---
title: 'Xamarin.Forms Фигуры: преобразования пути'
description: Xamarin.FormsПреобразование определяет способ преобразования объекта пути из одного пространства координат в другое пространство координат.
ms.prod: xamarin
ms.assetid: 07DE3D66-1820-4642-BDDF-84146D40C99D
ms.technology: xamarin-forms
author: davidbritch
ms.author: dabritch
ms.date: 09/24/2020
no-loc:
- Xamarin.Forms
- Xamarin.Essentials
ms.openlocfilehash: f66ae6e6947b5dade5302def5a7f89904bf701fe
ms.sourcegitcommit: 044e8d7e2e53f366942afe5084316198925f4b03
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "97940009"
---
# <a name="no-locxamarinforms-shapes-path-transforms"></a>Xamarin.Forms Фигуры: преобразования пути

[![Загрузить образец](~/media/shared/download.png) загрузить пример](/samples/xamarin/xamarin-forms-samples/userinterface-shapesdemos/)

`Transform`Определяет способ преобразования `Path` объекта из одного пространства координат в другое пространство координат. При применении преобразования к `Path` объекту он изменяет способ отрисовки объекта в пользовательском интерфейсе.

Преобразования можно разделить на четыре общие классификации: вращение, масштабирование, наклон и перевод. Xamarin.Forms Определяет класс для каждой из этих классификаций преобразований:

- `RotateTransform`, который поворачивает объект на `Path` указанный объект `Angle` .
- `ScaleTransform`, который масштабирует `Path` объект по указанному `ScaleX` и `ScaleY` сумме.
- `SkewTransform`, который наклоняет `Path` объект по указанному `AngleX` и `AngleY` сумме.
- `TranslateTransform`, который перемещает `Path` объект по указанному `X` и `Y` сумме.

Xamarin.Forms также предоставляет следующие классы для создания более сложных преобразований:

- `TransformGroup`, представляющий составное преобразование, состоящее из нескольких объектов Transform.
- `CompositeTransform`, который применяет к объекту несколько операций преобразования `Path` .
- `MatrixTransform`, который создает пользовательские преобразования, которые не предоставляются другими классами преобразования.

Все эти классы являются производными от `Transform` класса, который определяет `Value` свойство типа `Matrix` , которое представляет текущее преобразование как `Matrix` объект. Это свойство поддерживается [`BindableProperty`](xref:Xamarin.Forms.BindableProperty) объектом, что означает, что он может быть целевым объектом привязок данных и имеет стиль. Дополнительные сведения о `Matrix` структуре см. в разделе [Преобразование матрицы](#transform-matrix).

Чтобы применить преобразование к `Path` , создайте класс преобразования и задайте его в качестве значения `Path.RenderTransform` Свойства.

## <a name="rotation-transform"></a>Преобразование поворота

Преобразование «Вращение» поворачивает `Path` объект по часовой стрелке относительно заданной точки в двухмерной системе координат x-y.

`RotateTransform`Класс, производный от `Transform` класса, определяет следующие свойства:

- `Angle`Тип `double` представляет угол поворота по часовой стрелке в градусах. Значение этого свойства по умолчанию равно 0,0.
- `CenterX`Тип `double` представляет координату x центральной точки вращения. Значение этого свойства по умолчанию равно 0,0.
- `CenterY`Тип `double` представляет координату y центральной точки вращения. Значение этого свойства по умолчанию равно 0,0.

Эти свойства поддерживаются объектами [`BindableProperty`](xref:Xamarin.Forms.BindableProperty), то есть эти свойства можно указывать в качестве целевых для привязки и стилизации данных.

`CenterX`Свойства и `CenterY` определяют точку, вокруг которой `Path` поворачивается объект. Эта центральная точка выражается в пространстве координат объекта, который преобразуется. По умолчанию поворот применяется к (0, 0), который является верхним левым углом `Path` объекта.

В следующем примере показано, как повернуть `Path` объект.

```xaml
<Path Stroke="Black"
      Aspect="Uniform"
      HorizontalOptions="Center"
      HeightRequest="100"
      WidthRequest="100"
      Data="M13.908992,16.207977L32.000049,16.207977 32.000049,31.999985 13.908992,30.109983z">
    <Path.RenderTransform>
        <RotateTransform CenterX="0"
                         CenterY="0"
                         Angle="45" />
    </Path.RenderTransform>
</Path>
```

В этом примере `Path` объект поворачивается на 45 градусов относительно левого верхнего угла.

## <a name="scale-transform"></a>Преобразование масштабирования

Преобразование масштаба масштабирует `Path` объект в двухмерной системе координат x-y.

`ScaleTransform`Класс, производный от `Transform` класса, определяет следующие свойства:

- `ScaleX`Тип `double` , который представляет коэффициент масштабирования по оси x. Значение этого свойства по умолчанию равно 1,0.
- `ScaleY`Тип `double` , который представляет коэффициент масштабирования по оси y. Значение этого свойства по умолчанию равно 1,0.
- `CenterX`Тип `double` , который представляет координату x центральной точки этого преобразования. Значение этого свойства по умолчанию равно 0,0.
- `CenterY`Тип `double` , который представляет координату по оси y центральной точки этого преобразования. Значение этого свойства по умолчанию равно 0,0.

Эти свойства поддерживаются объектами [`BindableProperty`](xref:Xamarin.Forms.BindableProperty), то есть эти свойства можно указывать в качестве целевых для привязки и стилизации данных.

Значение `ScaleX` и `ScaleY` имеет огромное влияние на итоговое масштабирование:

- Значения от 0 до 1 уменьшают ширину и высоту масштабированного объекта.
- Значения, превышающие 1, увеличивают ширину и высоту масштабированного объекта.
- Значения 1 указывают, что объект не масштабируется.
- Отрицательные значения переворачивают объект масштаба по горизонтали и вертикали.
- Значения от 0 до-1 переворачивают объект масштаба и уменьшают его ширину и высоту.
- Значения меньше-1 переворачивают объект и увеличивают его ширину и высоту.
- Значения-1 переворачивают масштабируемый объект, но не изменяют его горизонтальный или вертикальный размер.

`CenterX`Свойства и `CenterY` определяют точку, относительно которой `Path` масштабируется объект. Эта центральная точка выражается в пространстве координат объекта, который преобразуется. По умолчанию масштабирование применяется к (0, 0), который является верхним левым углом `Path` объекта. Это приводит к перемещению `Path` объекта и его последующему увеличению, поскольку при применении преобразования изменяется координатное пространство, в котором `Path` находится объект.

В следующем примере показано, как масштабировать `Path` объект.

```xaml
<Path Stroke="Black"
      Aspect="Uniform"
      HorizontalOptions="Center"
      HeightRequest="100"
      WidthRequest="100"
      Data="M13.908992,16.207977L32.000049,16.207977 32.000049,31.999985 13.908992,30.109983z">
    <Path.RenderTransform>
        <ScaleTransform CenterX="0"
                        CenterY="0"
                        ScaleX="1.5"
                        ScaleY="1.5" />
    </Path.RenderTransform>
</Path>
```

В этом примере `Path` объект масштабируется до 1,5 раз в размер.

## <a name="skew-transform"></a>Преобразование отклонений

Преобразование «наклон» расклоняет `Path` объект в двухмерной системе координат x-y и полезен для создания иллюзии трехмерной глубины в двухмерном объекте.

`SkewTransform`Класс, производный от `Transform` класса, определяет следующие свойства:

- `AngleX`Тип `double` , который представляет угол отклонения оси x, измеряемый в градусах против часовой стрелки от оси y. Значение этого свойства по умолчанию равно 0,0.
- `AngleY`Тип `double` , который представляет угол отклонения оси y, измеряемый в градусах против часовой стрелки от оси x. Значение этого свойства по умолчанию равно 0,0.
- `CenterX`Тип `double` , который представляет координату x центра преобразования. Значение этого свойства по умолчанию равно 0,0.
- `CenterY`Тип `double` , который представляет координату по оси y центра преобразования. Значение этого свойства по умолчанию равно 0,0.

Эти свойства поддерживаются объектами [`BindableProperty`](xref:Xamarin.Forms.BindableProperty), то есть эти свойства можно указывать в качестве целевых для привязки и стилизации данных.

Чтобы спрогнозировать воздействие преобразования «наклон», рассмотрите возможность `AngleX` расравномерности значений оси x относительно исходной системы координат. Таким образом, для `AngleX` 30 ось y поворачивается на 30 градусов по происхождению, а значения по оси x — на 30 градусов относительно этого источника. Аналогичным образом, значение, `AngleY` равное 30, отклоняет значения y `Path` объекта на 30 градусов от источника.

> [!NOTE]
> Чтобы наклонить `Path` объект на месте, задайте `CenterX` `CenterY` для свойств и значение центральной точки объекта.

В следующем примере показано, как наклон `Path` объекта:

```xaml
<Path Stroke="Black"
      Aspect="Uniform"
      HorizontalOptions="Center"
      HeightRequest="100"
      WidthRequest="100"
      Data="M13.908992,16.207977L32.000049,16.207977 32.000049,31.999985 13.908992,30.109983z">
    <Path.RenderTransform>
        <SkewTransform CenterX="0"
                       CenterY="0"
                       AngleX="45"
                       AngleY="0" />
    </Path.RenderTransform>
</Path>
```

В этом примере к объекту применяется Горизонтальное отклонение в 45 градусов `Path` от центральной точки (0,0).

## <a name="translate-transform"></a>Преобразование преобразования

Преобразование «миграция» перемещает объект в двухмерной системе координат x-y.

`TranslateTransform`Класс, производный от `Transform` класса, определяет следующие свойства:

- `X`Тип `double` , который представляет расстояние для перемещения вдоль оси x. Значение этого свойства по умолчанию равно 0,0.
- `Y`Тип `double` , который представляет расстояние для перемещения вдоль оси y. Значение этого свойства по умолчанию равно 0,0.

Эти свойства поддерживаются объектами [`BindableProperty`](xref:Xamarin.Forms.BindableProperty), то есть эти свойства можно указывать в качестве целевых для привязки и стилизации данных.

Отрицательные `X` значения перемещают объект влево, а положительные значения перемещают объект вправо. Отрицательные `Y` значения перемещают объект, а положительные значения перемещают объект вниз.

В следующем примере показано, как преобразовать `Path` объект:

```xaml
<Path Stroke="Black"
      Aspect="Uniform"
      HorizontalOptions="Center"
      HeightRequest="100"
      WidthRequest="100"
      Data="M13.908992,16.207977L32.000049,16.207977 32.000049,31.999985 13.908992,30.109983z">
    <Path.RenderTransform>
        <TranslateTransform X="50"
                            Y="50" />
    </Path.RenderTransform>
</Path>
```

В этом примере `Path` объект перемещается 50 единиц, не зависящих от устройства, справа и 50 независимых устройств.

## <a name="multiple-transforms"></a>Множественные преобразования

Xamarin.Forms имеет два класса, которые поддерживают применение нескольких преобразований к `Path` объекту. Это `TransformGroup` и `CompositeTransform` . `TransformGroup`Выполняет преобразование в любом нужном порядке, в то время как `CompositeTransform` выполняет преобразование в определенном порядке.

### <a name="transform-groups"></a>Группы преобразований

Группы преобразований представляют составные преобразования, состоящие из нескольких `Transform` объектов.

`TransformGroup`Класс, производный от `Transform` класса, определяет `Children` свойство типа `TransformCollection` , которое представляет коллекцию `Transform` объектов. Это свойство поддерживается [`BindableProperty`](xref:Xamarin.Forms.BindableProperty) объектом, что означает, что он может быть целевым объектом привязок данных и имеет стиль.

Порядок преобразований важен в составном преобразовании, использующем `TransformGroup` класс. Например, если сначала повернуть, затем масштабировать, а затем преобразовать, вы получите другой результат, чем при первом переводе, при повороте, а затем при масштабировании. Один из причин важен в том, что преобразования, такие как вращение и масштабирование, выполняются в отношении происхождения системы координат. Масштабирование объекта, центрированного по отношению к источнику, приводит к другому результату масштабирования объекта, который был перемещен от источника. Аналогично, поворот объекта, центрированного по отношению к источнику, приводит к результату, отличному от поворота объекта, который был перемещен от источника.

В следующем примере показано, как выполнить составное преобразование с помощью `TransformGroup` класса:

```xaml
<Path Stroke="Black"
      Aspect="Uniform"
      HorizontalOptions="Center"
      HeightRequest="100"
      WidthRequest="100"
      Data="M13.908992,16.207977L32.000049,16.207977 32.000049,31.999985 13.908992,30.109983z">
    <Path.RenderTransform>
        <TransformGroup>
            <ScaleTransform ScaleX="1.5"
                            ScaleY="1.5" />
            <RotateTransform Angle="45" />
        </TransformGroup>
    </Path.RenderTransform>
</Path>
```

В этом примере `Path` объект масштабируется до 1,5 раз в размер, а затем поворачивается на 45 градусов.

## <a name="composite-transforms"></a>Составные преобразования

Составное преобразование применяет к объекту несколько преобразований.

`CompositeTransform`Класс, производный от `Transform` класса, определяет следующие свойства:

- `CenterX`Тип `double` , который представляет координату x центральной точки этого преобразования. Значение этого свойства по умолчанию равно 0,0.
- `CenterY`Тип `double` , который представляет координату по оси y центральной точки этого преобразования. Значение этого свойства по умолчанию равно 0,0.
- `ScaleX`Тип `double` , который представляет коэффициент масштабирования по оси x. Значение этого свойства по умолчанию равно 1,0.
- `ScaleY`Тип `double` , который представляет коэффициент масштабирования по оси y. Значение этого свойства по умолчанию равно 1,0.
- `SkewX`Тип `double` , который представляет угол отклонения оси x, измеряемый в градусах против часовой стрелки от оси y. Значение этого свойства по умолчанию равно 0,0.
- `SkewY`Тип `double` , который представляет угол отклонения оси y, измеряемый в градусах против часовой стрелки от оси x. Значение этого свойства по умолчанию равно 0,0.
- `Rotation`Тип `double` представляет угол поворота по часовой стрелке в градусах. Значение этого свойства по умолчанию равно 0,0.
- `TranslateX`Тип `double` , который представляет расстояние для перемещения вдоль оси x. Значение этого свойства по умолчанию равно 0,0.
- `TranslateY`Тип `double` , который представляет расстояние для перемещения вдоль оси y. Значение этого свойства по умолчанию равно 0,0.

Эти свойства поддерживаются объектами [`BindableProperty`](xref:Xamarin.Forms.BindableProperty), то есть эти свойства можно указывать в качестве целевых для привязки и стилизации данных.

`CompositeTransform`Применяет преобразования в следующем порядке:

1. Масштаб ( `ScaleX` и `ScaleY` ).
1. Асимметрия ( `SkewX` и `SkewY` ).
1. Повернуть ( `Rotation` ).
1. Преобразование ( `TranslateX` , `TranslateY` ).

Если необходимо применить несколько преобразований к объекту в другом порядке, следует создать `TransformGroup` и вставить преобразования в требуемом порядке.

> [!IMPORTANT]
> В `CompositeTransform` используются те же центральные точки, `CenterX` а `CenterY` для всех преобразований. Если необходимо указать разные центральные точки для преобразования, используйте `TransformGroup` ,

В следующем примере показано, как выполнить составное преобразование с помощью `CompositeTransform` класса:

```xaml
<Path Stroke="Black"
      Aspect="Uniform"
      HorizontalOptions="Center"
      HeightRequest="100"
      WidthRequest="100"
      Data="M13.908992,16.207977L32.000049,16.207977 32.000049,31.999985 13.908992,30.109983z">
    <Path.RenderTransform>
        <CompositeTransform ScaleX="1.5"
                            ScaleY="1.5"
                            Rotation="45"
                            TranslateX="50"
                            TranslateY="50" />
    </Path.RenderTransform>
</Path>
```

В этом примере `Path` объект масштабируется до 1,5 раз в размер, затем поворачивается на 45 градусов, а затем преобразуется в 50 аппаратно-независимых единиц.

## <a name="transform-matrix"></a>Преобразование матрицы

Преобразование можно описать в терминах матрицы аффинного преобразования 3x3, которая выполняет преобразования в двухмерном пространстве. Эта матрица 3x3 представлена `Matrix` структурой, которая представляет собой коллекцию из трех строк и три столбца `double` значений.

`Matrix`Структура определяет следующие свойства:

- `Determinant`Тип `double` , который получает определитель матрицы.
- `HasInverse`Тип `bool` , который указывает, является ли матрица обратимой.
- `Identity`Тип `Matrix` , который получает матрицу идентификаторов.
- `HasIdentity`Тип `bool` , который указывает, является ли матрица матрицей идентификаторов.
- `M11`Тип `double` , который представляет значение первой строки и первого столбца матрицы.
- `M12`Тип `double` , который представляет значение первой строки и второй столбец матрицы.
- `M21`Тип `double` , который представляет значение второй строки и первого столбца матрицы.
- `M22`Тип `double` , который представляет значение второй строки и второй столбец матрицы.
- `OffsetX`Тип `double` , представляющий значение третьей строки и первый столбец матрицы.
- `OffsetY`Тип `double` , представляющий значение третьей строки и второй столбец матрицы.

`OffsetX`Свойства и `OffsetY` имеют имя, так как они определяют величину смещения пространства координат вдоль оси x и оси y соответственно.

Кроме того, `Matrix` Структура предоставляет ряд методов, которые можно использовать для управления значениями матрицы, включая `Append` ,, `Invert` `Multiply` `Prepend` и многие другие.

В следующей таблице показана структура Xamarin.Forms матрицы.

:::row:::
    :::column:::
        M11
    :::column-end:::
    :::column:::
        M12
    :::column-end:::
    :::column:::
        0,0
    :::column-end:::
:::row-end:::
:::row:::
    :::column:::
        M21
    :::column-end:::
    :::column:::
        M22
    :::column-end:::
    :::column:::
        0,0
    :::column-end:::
:::row-end:::
:::row:::
    :::column:::
        OffsetX
    :::column-end:::
    :::column:::
        OffsetY
    :::column-end:::
    :::column:::
        1.0
    :::column-end:::
:::row-end:::

> [!NOTE]
> В матрице аффинных преобразований последний столбец равен (0, 0, 1), поэтому необходимо указать только элементы в первых двух столбцах.

Управляя значениями матрицы, можно поворачивать, масштабировать, отклонять и преобразовывать `Path` объекты. Например, если изменить `OffsetX` значение на 100, вы можете использовать его, чтобы переместить `Path` объект 100 устройства, независимые от устройств, вдоль оси x. Если изменить `M22` значение на 3, можно использовать его для растяжения `Path` объекта в три раза после текущей высоты. Если изменить оба значения, вы перемещаете `Path` объектные единицы 100, независимые от устройства, по оси x и растягиваюте их высоту по коэффициенту 3. Кроме того, матрицы аффинных преобразований можно умножить, чтобы сформировать любое количество линейных преобразований, таких как поворот и наклон, а затем перевод.

## <a name="custom-transforms"></a>Пользовательские преобразования

`MatrixTransform`Класс, производный от `Transform` класса, определяет `Matrix` свойство типа `Matrix` , которое представляет матрицу, определяющую преобразование. Это свойство поддерживается [`BindableProperty`](xref:Xamarin.Forms.BindableProperty) объектом, что означает, что он может быть целевым объектом привязок данных и имеет стиль.

Любое преобразование, которое можно описать с помощью `TranslateTransform` `ScaleTransform` объекта,, `RotateTransform` или, `SkewTransform` может быть также описано в `MatrixTransform` . Однако `TranslateTransform` `ScaleTransform` классы,, `RotateTransform` и `SkewTransform` проще концептуализировать, чем задавать компоненты вектора в `Matrix` . Таким образом, `MatrixTransform` класс обычно используется для создания пользовательских преобразований, которые не предоставляются `RotateTransform` `ScaleTransform` `SkewTransform` классами,, или `TranslateTransform` .

В следующем примере показано, как преобразовать `Path` объект с помощью `MatrixTransform` :

```xaml
<Path Stroke="Black"
      Aspect="Uniform"
      HorizontalOptions="Center"
      Data="M13.908992,16.207977L32.000049,16.207977 32.000049,31.999985 13.908992,30.109983z">
    <Path.RenderTransform>
        <MatrixTransform>
            <MatrixTransform.Matrix>
                <!-- M11 stretches, M12 skews -->
                <Matrix OffsetX="10"
                        OffsetY="100"
                        M11="1.5"
                        M12="1" />
            </MatrixTransform.Matrix>
        </MatrixTransform>
    </Path.RenderTransform>
</Path>
```

В этом примере `Path` объект растягивается, наклонен и смещается в измерениях X и Y.

Кроме того, это может быть написано в упрощенной форме, которая использует преобразователь типов, встроенный в Xamarin.Forms :

```xaml
<Path Stroke="Black"
      Aspect="Uniform"
      HorizontalOptions="Center"
      Data="M13.908992,16.207977L32.000049,16.207977 32.000049,31.999985 13.908992,30.109983z">
    <Path.RenderTransform>
        <MatrixTransform Matrix="1.5,1,0,1,10,100" />
    </Path.RenderTransform>
</Path>
```

В этом примере `Matrix` свойство указывается как строка с разделителями-запятыми, состоящая из шести членов: `M11` , `M12` , `M21` , `M22` , `OffsetX` , `OffsetY` . Хотя в этом примере элементы разделяются запятой, их также можно разделять одним или несколькими пробелами.

Кроме того, предыдущий пример можно упростить еще больше, указав те же шесть членов, что и значение `RenderTransform` Свойства:

```xaml
<Path Stroke="Black"
      Aspect="Uniform"
      HorizontalOptions="Center"
      RenderTransform="1.5 1 0 1 10 100"
      Data="M13.908992,16.207977L32.000049,16.207977 32.000049,31.999985 13.908992,30.109983z" />
```

## <a name="related-links"></a>Связанные ссылки

- [Шапедемос (пример)](/samples/xamarin/xamarin-forms-samples/userinterface-shapesdemos/)
- [Xamarin.Forms Многоугольник](index.md)
