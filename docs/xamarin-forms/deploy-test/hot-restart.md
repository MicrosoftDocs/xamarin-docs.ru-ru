---
title: Горячий перезапуск Xamarin
description: Этот документ описывает настройку и использование горячего перезапуска Xamarin для отладки приложения iOS.
ms.prod: xamarin
ms.assetid: 6BC62A88-9368-41BB-8494-760F2A4805DB
ms.technology: xamarin-forms
author: maddyleger1
ms.author: maleger
ms.date: 03/16/2020
no-loc:
- Xamarin.Forms
- Xamarin.Essentials
ms.openlocfilehash: cbecb7035514341ff3b07cc9d765850945cc3b09
ms.sourcegitcommit: 3aa9bdcaaedca74ab5175cb2338a1df122300243
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101749386"
---
# <a name="xamarin-hot-restart"></a>Горячий перезапуск Xamarin

Горячий перезапуск Xamarin позволяет быстро проверить изменения в приложении во время разработки, включая изменение кода, ресурсов и ссылок в нескольких файлах. Он передает новые изменения в существующий пакет приложений в целевом объекте отладки, что значительно ускоряет цикл сборки и развертывания.

> [!IMPORTANT]
> Сейчас горячий перезапуск Xamarin доступен в стабильной версии Visual Studio 2019 16.5 и поддерживает приложения iOS с помощью Xamarin.Forms. Поддержка Visual Studio для Mac и приложений, отличных от Xamarin.Forms, включена в дорожную карту.

## <a name="requirements"></a>Требования

- Visual Studio 2019 версии 16.5 или более поздней
- iTunes (Microsoft Store или 64-разрядные версии)
- Учетная запись разработчика Apple и регистрация в платной [Программе для разработчиков Apple](https://developer.apple.com/programs)


## <a name="initial-setup"></a>Начальная настройка

> [!NOTE]
> По умолчанию в Visual Studio 16.8 и предыдущих версиях отключен горячий перезапуск Xamarin. Ее можно включить в меню **Сервис > Параметры... > Среда > Предварительные версии функций > Включить горячий перезапуск Xamarin**.
> Начиная с Visual Studio 16.9 горячий перезапуск Xamarin включен по умолчанию. Отключить его можно в меню **Сервис > Параметры > Xamarin > Параметры iOS > Включить горячий перезапуск Xamarin**.

1. Убедитесь, что проект iOS задан в качестве запускаемого проекта, а для конфигурации сборки задано значение **Debug|iPhone** (Отладка|iPhone).

   1. Если это существующий проект, перейдите в раздел **Сборка > Диспетчер конфигурации...** и убедитесь, что для проекта iOS включен параметр **Развертывание**.

2. Выберите и щелкните элемент **Локальное устройство** на панели инструментов, чтобы запустить мастер установки:

    [![Снимок экрана: панель инструментов Visual Studio с локальным устройством, указанным в качестве целевого объекта отладки.](hot-restart-images/toolbar.png)](hot-restart-images/toolbar.png)

3. Если компонент iTunes не установлен, щелкните **Скачать iTunes**, чтобы скачать установщик. После завершения установки iTunes нажмите кнопку **Далее**.

4. Подключите устройство iOS к компьютеру. Если устройство уже подключено к сети, отключите его и снова подключите. После обнаружения устройства его имя появится в мастере. Нажмите кнопку **Далее**.

5. Введите учетные данные разработчика Apple и нажмите кнопку **Далее**.

6. Выберите команду разработчик в раскрывающемся меню, чтобы включить [автоматическую подготовку](~/ios/get-started/installation/device-provisioning/automatic-provisioning.md) в проекте. Нажмите кнопку **Готово**.

> [!NOTE]
> Рекомендуется использовать автоматическую подготовку, чтобы можно было легко настроить дополнительные устройства iOS для развертывания. Однако вы можете отключить ее и продолжить использование ручной подготовки при наличии подходящих профилей подготовки.

## <a name="use-xamarin-hot-restart"></a>Использование горячего перезапуска Xamarin
После первоначальной настройки подключенное устройство появится в раскрывающемся меню целевого объекта отладки. Чтобы выполнить отладку приложения, выберите устройство в раскрывающемся списке и нажмите кнопку **Выполнить**. Visual Studio может отобразить сообщение о необходимости запустить приложение на устройстве вручную, чтобы начать сеанс отладки.

Вы можете внести изменения в файлы кода во время отладки, а затем нажмите кнопку **Перезапустить** на панели инструментов отладки или используйте сочетание клавиш **CTRL+ SHIFT+F5** для перезапуска сеанса отладки с применением новых изменений:

[![Снимок экрана: панель инструментов отладки с выделенной кнопкой перезапуска.](hot-restart-images/restart.png)](hot-restart-images/toolbar.png)

Можете также использовать символ препроцессора `HOTRESTART`, чтобы предотвратить выполнение определенного кода при отладке с использованием горячего перезапуска Xamarin.

## <a name="limitations"></a>Ограничения

- Сейчас поддерживаются только приложения iOS, созданные с использованием Xamarin.Forms и устройств iOS.
- Поддерживаются только 64-разрядные устройства iOS. Начиная с iOS 11 Apple больше не разрешает запускать приложения iOS на 32-разрядной архитектуре (устройства до iPhone 5s).
- Файлы раскадровки и XIB не поддерживаются, и приложение может аварийно завершить работу, если попытается загрузить их во время выполнения. Чтобы предотвратить выполнение этого кода, используйте символ препроцессора `HOTRESTART`.
- Статические библиотеки и платформы iOS не поддерживаются. Если приложение попытается их загрузить, в среде выполнения могут возникнуть ошибки или сбои. Чтобы предотвратить выполнение этого кода, используйте символ препроцессора `HOTRESTART`. Но динамические библиотеки iOS поддерживаются.
- Горячий перезапуск Xamarin запрещено использовать в целях создания пакетов приложений для публикации. Вам по-прежнему потребуется компьютер Mac для полной компиляции, подписывания и развертывания приложения в рабочей среде.
- Каталоги ресурсов сейчас не поддерживаются. При использовании "горячего" перезапуска в приложении отобразится стандартный значок и экран запуска для приложений Xamarin. Каталоги ресурсов поддерживаются, если выполнить сопряжение с компьютером Mac или вести разработку на таком компьютере.

## <a name="troubleshoot"></a>Устранение неполадок

- Существует известная проблема, когда при включении сборок для конкретных устройств сеанс отладки приложения не запускается. В качестве обходного решения отключите эту возможность в разделе **Свойства > Сборка iOS** и повторите запуск отладки. Эта проблема будет исправлена в будущем выпуске.
- Если это приложение уже установлено на устройстве, попытка развертывания с использованием горячего перезапуска может завершиться ошибкой `AMDeviceStartHouseArrestService`. Чтобы обойти эту проблему, удалите приложение на устройстве и снова разверните его.
- Если ввести идентификатор Apple ID, на который не распространяется Программа для разработчиков Apple, появится следующая ошибка: `Authentication Error. Xcode 7.3 or later is required to continue developing with your Apple ID`. Чтобы использовать горячую перезагрузку Xamarin для устройств iOS, требуется действительная учетная запись разработчика Apple. 

Чтобы сообщить о дополнительных проблемах, используйте средство обратной связи в разделе [Справка > Обратная связь > Сообщить о проблеме](/visualstudio/ide/feedback-options?view=vs-2019#report-a-problem).
