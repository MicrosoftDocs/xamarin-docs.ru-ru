---
title: Xamarin.FormsВведение в веб-службы
description: Это руководство содержит пошаговое руководство по Xamarin.Forms использованию примера приложения, которое показывает, как взаимодействовать с различными веб-службами. Хотя каждая веб-служба использует отдельный пример приложения, они функционально похожи и совместно используют общие классы.
ms.prod: xamarin
ms.assetid: A3FEB262-0D79-42E6-8F8B-A565618C490B
ms.technology: xamarin-forms
author: davidbritch
ms.author: dabritch
ms.date: 02/28/2017
no-loc:
- Xamarin.Forms
- Xamarin.Essentials
ms.openlocfilehash: d714b4c9d598d8cca26ae992abf3f15df703d11b
ms.sourcegitcommit: 32d2476a5f9016baa231b7471c88c1d4ccc08eb8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/18/2020
ms.locfileid: "84139182"
---
# <a name="xamarinforms-web-services-introduction"></a>Xamarin.FormsВведение в веб-службы

[![Загрузить образец](~/media/shared/download.png) загрузить пример](https://docs.microsoft.com/samples/xamarin/xamarin-forms-samples/webservices-todorest)

_В этом разделе приводится пошаговое руководство по Xamarin.Forms использованию примера приложения, которое показывает, как взаимодействовать с различными веб-службами. Хотя каждая веб-служба использует отдельный пример приложения, они функционально похожи и совместно используют общие классы._

Пример приложения списка задач, описанный ниже, используется для демонстрации доступа к различным типам серверных веб-служб с помощью Xamarin.Forms . Она предоставляет следующие возможности:

- Просмотр списка задач.
- Добавление, изменение и удаление задач.
- Задайте для задачи состояние "Готово".
- Говорите о полях имя и примечания задачи.

Во всех случаях задачи хранятся в серверной части, доступ к которой осуществляется через веб-службу.

При запуске приложения отображается страница со списком задач, полученных от веб-службы, и позволяет пользователю создать новую задачу. Если щелкнуть задачу, приложение перейдет к другой странице, где задача может быть изменена, сохранена, удалена и произнесена. Ниже показано итоговое приложение:

![](introduction-images/app-example-1.png "Todo application - first page")
![](introduction-images/app-example-2.png "Todo application - second page")

В каждом разделе этого руководстве содержится ссылка для скачивания на *другую* версию приложения, которая демонстрирует конкретный тип серверной части веб-службы. Скачайте соответствующий пример кода на странице, относящейся к каждому стилю веб-службы.

## <a name="understand-the-application-anatomy"></a>Общие сведения о структуре приложения

Проект общего кода для каждого примера приложения состоит из трех основных папок:

|Папка|Назначение|
|--- |--- |
|Данные|Содержит классы и интерфейсы, используемые для управления элементами данных и взаимодействия с веб-службой. Как минимум, сюда входит `TodoItemManager` класс, который предоставляется через свойство в `App` классе для вызова операций веб-службы.|
|Модели|Содержит классы модели данных для приложения. Как минимум, сюда входит `TodoItem` класс, который моделирует один элемент данных, используемых приложением. В папку также могут входить все дополнительные классы, используемые для моделирования пользовательских данных.|
|Представления|Содержит страницы для приложения. Обычно это состоит из `TodoListPage` классов и и `TodoItemPage` любых дополнительных классов, используемых для проверки подлинности.|

Проект общего кода для каждого приложения также состоит из нескольких важных файлов:

|Файл|Назначение|
|--- |--- |
|Constants.cs|`Constants`Класс, указывающий любые константы, используемые приложением для взаимодействия с веб-службой. Эти константы нуждаются в обновлении для доступа к личной серверной службе, созданной на поставщике.|
|ITextToSpeech.cs|`ITextToSpeech`Интерфейс, указывающий, что `Speak` метод должен предоставляться любыми реализующими классами.|
|Todo.cs|`App`Класс, отвечающий за создание экземпляра первой страницы, которая будет отображаться приложением на каждой платформе, и `TodoItemManager` класс, используемый для вызова операций веб-службы.|

### <a name="view-pages"></a>Просмотр страниц

Большинство примеров приложений содержат по крайней мере две страницы:

- **Тодолистпаже** — на этой странице отображается список `TodoItem` экземпляров, а также значок деления, если `TodoItem.Done` свойство имеет значение `true` . При щелчке элемента выполняется переход к `TodoItemPage` . Кроме того, можно создать новые элементы, щелкнув *+* символ.
- **Тодоитемпаже** — на этой странице отображаются подробные сведения о выбранном элементе `TodoItem` , а также его редактирование, сохранение, удаление и речь.

Кроме того, некоторые примеры приложений содержат дополнительные страницы, которые используются для управления процессом проверки подлинности пользователя.

### <a name="model-the-data"></a>Моделирование данных

Каждый пример приложения использует `TodoItem` класс для моделирования данных, отображаемых и отправляемых в веб-службу для хранения. Следующий пример кода демонстрирует класс `TodoItem`:

```csharp
public class TodoItem
{
    public string ID { get; set; }
    public string Name { get; set; }
    public string Notes { get; set; }
    public bool Done { get; set; }
}
```

`ID`Свойство используется для уникальной идентификации каждого `TodoItem` экземпляра и используется каждой веб-службой для идентификации обновляемых или удаляемых данных.

### <a name="invoke-web-service-operations"></a>Вызов операций веб-службы

Доступ к операциям веб-службы осуществляется через `TodoItemManager` класс, и экземпляр класса может быть доступен через `App.TodoManager` свойство. `TodoItemManager`Класс предоставляет следующие методы для вызова операций веб-службы:

- **Жеттасксасинк** — этот метод используется для заполнения `ListView` элемента управления на `TodoListPage` `TodoItem` экземплярах, извлеченных из веб-службы.
- **Саветаскасинк** — этот метод используется для создания или обновления `TodoItem` экземпляра в веб-службе.
- **Делететаскасинк** — этот метод используется для удаления `TodoItem` экземпляра в веб-службе.

Кроме того, некоторые примеры приложений содержат дополнительные методы в `TodoItemManager` классе, которые используются для управления процессом проверки подлинности пользователя.

Вместо того, чтобы вызывать операции веб-службы напрямую, `TodoItemManager` методы вызывают методы в зависимом классе, который внедряется в `TodoItemManager` конструктор. Например, один пример приложения внедряет `RestService` класс в `TodoItemManager` конструктор, чтобы предоставить реализацию, использующую интерфейсы API для доступа к данным.

## <a name="related-links"></a>Связанные ссылки

- [ASMX (пример)](https://docs.microsoft.com/samples/xamarin/xamarin-forms-samples/webservices-todoasmx)
- [WCF (пример)](https://docs.microsoft.com/samples/xamarin/xamarin-forms-samples/webservices-todowcf)
- [ОСТАВШАЯся (пример)](https://docs.microsoft.com/samples/xamarin/xamarin-forms-samples/webservices-todorest)
