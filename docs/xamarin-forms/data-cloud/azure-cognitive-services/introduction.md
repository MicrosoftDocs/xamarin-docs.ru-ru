---
title: Xamarin.FormsОбщие сведения об Azure Cognitive Services
description: ''
ms.prod: ''
ms.assetid: ''
ms.technology: ''
author: ''
ms.author: ''
ms.date: ''
no-loc:
- Xamarin.Forms
- Xamarin.Essentials
ms.openlocfilehash: 7c2a63c40d1006c7d83c9dde871e17d4b194bdca
ms.sourcegitcommit: 57bc714633364aeb34aba9803e88802bebf321ba
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/28/2020
ms.locfileid: "84129718"
---
# <a name="xamarinforms-and-azure-cognitive-services-introduction"></a>Xamarin.FormsОбщие сведения об Azure Cognitive Services

[![Загрузить образец](~/media/shared/download.png) загрузить пример](https://docs.microsoft.com/samples/xamarin/xamarin-forms-samples/webservices-todocognitiveservices)

_Microsoft Cognitive Services — это набор API-интерфейсов, пакетов SDK и служб, доступных разработчикам, чтобы сделать свои приложения более интеллектуальными, добавив такие функции, как распознавание лиц, распознавание речи и понимание языка. В этой статье приводятся общие сведения о примере приложения, в котором показано, как вызывать некоторые API-интерфейсы Microsoft для работы со службой._

## <a name="overview"></a>Обзор

Прилагаемый пример — это приложение списка дел, которое предоставляет следующие функциональные возможности:

- Просмотр списка задач.
- Добавление и изменение задач с помощью экранной клавиатуры или распознавание речи с помощью Microsoft Speech API.
- Задачи проверки орфографии с использованием API Bing для проверки орфографии. Дополнительные сведения см. [в разделе Проверка орфографии с помощью API Bing для проверки орфографии](spell-check.md).
- Перевод задач с английского на немецкий с помощью API-интерфейса переводчика. Дополнительные сведения см. [в разделе Преобразование текста с помощью API-интерфейса переводчика](text-translation.md).
- Удаление задач.
- Задайте для задачи состояние "Готово".
- Оцените приложение с помощью распознавания эмоцийного распознавания, используя API распознавания лиц. Дополнительные сведения см. [в разделе Распознавание распознавания эмоций с помощью API распознавания лиц](emotion-recognition.md).

> [!WARNING]
> API распознавания речи Bing быть нерекомендуемым в пользу службы распознавания речи Azure. Пример, выделенный для службы распознавания речи Azure, см. в разделе [Распознавание речи с помощью API речевой службы](~/xamarin-forms/data-cloud/azure-cognitive-services/speech-recognition.md).

Задачи хранятся в локальной базе данных SQLite. Дополнительные сведения об использовании локальной базы данных SQLite см. в разделе [Работа с локальной базой данных](~/xamarin-forms/data-cloud/data/databases.md).

`TodoListPage`Отображается при запуске приложения. На этой странице отображается список всех задач, хранящихся в локальной базе данных, и пользователь имеет возможность создать новую задачу или оценить приложение:

![](introduction-images/sample-application-1.png "TodoListPage")

Новые элементы можно создать, нажав *+* кнопку, которая переходит к `TodoItemPage` . Для перехода на эту страницу можно также выбрать задачу:

![](introduction-images/sample-application-2.png "TodoItemPage")

`TodoItemPage`Позволяет создавать, изменять, проверять орфографию, переводить, сохранять и удалять задачи. Для создания или изменения задачи можно использовать распознавание речи. Это достигается нажатием кнопки микрофона для начала записи и нажатием этой же кнопки во второй раз для отмены записи, которая отправляет запись в API-интерфейс распознавания Распознавание речи Bing.

При нажатии кнопки SMIL на панели `TodoListPage` переходит к элементу `RateAppPage` , который используется для выполнения распознавания распознавания эмоций на изображении выражения лица:

![](introduction-images/sample-application-3.png "RateAppPage")

`RateAppPage`Позволяет пользователю получить фотографию своего лица, которая отправляется в API распознавания лиц с отображаемым распознавания эмоций.

## <a name="understand-the-application-anatomy"></a>Общие сведения о структуре приложения

Проект общего кода для примера приложения состоит из пяти основных папок:

|Папка|Назначение|
|--- |--- |
|Модели|Содержит классы модели данных для приложения. Сюда входит `TodoItem` класс, который моделирует один элемент данных, используемых приложением. Эта папка также содержит классы, используемые для моделирования ответов JSON, возвращаемых разными API-интерфейсами Microsoft для программирования сообщений.|
|Репозитории|Содержит `ITodoItemRepository` интерфейс и `TodoItemRepository` класс, используемые для выполнения операций с базой данных.|
|Службы|Содержит интерфейсы и классы, используемые для доступа к различным API-интерфейсам Microsoft для работы со службой, а также интерфейсы, используемые `DependencyService` классом для нахождение классов, реализующих интерфейсы в проектах платформы.|
|Utils|Содержит `Timer` класс, который используется `AuthenticationService` классом для обновления маркера доступа JWT каждые 9 минут.|
|Представления|Содержит страницы для приложения.|

Проект общего кода также содержит несколько важных файлов:

|Файл|Назначение|
|--- |--- |
|Constants.cs|`Constants`Класс, указывающий ключи API и конечные точки для вызовов API-интерфейсов службы Microsoft для Расприятия. Для констант ключа API требуется обновление для доступа к различным API-интерфейсам функции для программирования.|
|App.xaml.cs|`App`Класс отвечает за создание экземпляра первой страницы, которая будет отображаться приложением на каждой платформе, и `TodoManager` класса, который используется для вызова операций базы данных.|

### <a name="nuget-packages"></a>Пакеты NuGet

Пример приложения использует следующие пакеты NuGet:

- `Newtonsoft.Json`— предоставляет платформу JSON для .NET.
- `PCLStorage`— предоставляет набор межплатформенных API-интерфейсов ввода-вывода локальных файлов.
- `sqlite-net-pcl`— предоставляет хранилище базы данных SQLite.
- `Xam.Plugin.Media`— предоставляет API-интерфейсы для межплатформенного принятия и выбора фотографий.

Кроме того, эти пакеты NuGet также устанавливают собственные зависимости.

### <a name="model-the-data"></a>Моделирование данных

Пример приложения использует `TodoItem` класс для моделирования данных, которые отображаются и хранятся в локальной базе данных SQLite. Следующий пример кода демонстрирует класс `TodoItem`:

```csharp
public class TodoItem
{
  [PrimaryKey, AutoIncrement]
  public int ID { get; set; }
  public string Name { get; set; }
  public bool Done { get; set; }
}
```

`ID`Свойство используется для уникальной идентификации каждого `TodoItem` экземпляра и дополнено атрибутами SQLite, которые делают свойство первичным ключом автоматически увеличивающимся в базе данных.

### <a name="invoke-database-operations"></a>Вызов операций базы данных

`TodoItemRepository`Класс реализует операции с базой данных, и экземпляр класса может быть доступен через `App.TodoManager` свойство. `TodoItemRepository`Класс предоставляет следующие методы для вызова операций базы данных:

- **Жеталлитемсасинк** — извлекает все элементы из локальной базы данных SQLite.
- **Жетитемасинк** — извлекает указанный элемент из локальной базы данных SQLite.
- **Савеитемасинк** — создает или обновляет элемент в локальной базе данных SQLite.
- **Делетеитемасинк** — удаляет указанный элемент из локальной базы данных SQLite.

### <a name="platform-project-implementations"></a>Реализации проекта платформы

`Services`Папка в проекте общего кода содержит `IFileHelper` `IAudioRecorderService` интерфейсы и, которые используются `DependencyService` классом для нахождение классов, реализующих интерфейсы в проектах платформы.

`IFileHelper`Интерфейс реализуется `FileHelper` классом в каждом проекте платформы. Этот класс состоит из одного метода, `GetLocalFilePath` который возвращает путь к локальному файлу для хранения базы данных SQLite.

`IAudioRecorderService`Интерфейс реализуется `AudioRecorderService` классом в каждом проекте платформы. Этот класс состоит из `StartRecording` `StopRecording` поддерживаемых методов, и, которые используют интерфейсы API платформы для записи звука с микрофона устройства и сохранения их в виде WAV-файла. В iOS `AudioRecorderService` компонент использует `AVFoundation` API для записи звука. В Android `AudioRecordService` использует `AudioRecord` API для записи звука. В универсальная платформа Windows (UWP) `AudioRecorderService` компонент использует `AudioGraph` API для записи звука.

### <a name="invoke-cognitive-services"></a>Вызов вызываемых служб

Пример приложения вызывает следующие Microsoft Cognitive Services:

- Microsoft Speech API. Дополнительные сведения см. [в разделе Распознавание речи с помощью Microsoft Speech API](speech-recognition.md).
- API Bing для проверки орфографии. Дополнительные сведения см. [в разделе Проверка орфографии с помощью API Bing для проверки орфографии](spell-check.md).
- API преобразования. Дополнительные сведения см. [в разделе Преобразование текста с помощью API-интерфейса переводчика](text-translation.md).
- API распознавания лиц. Дополнительные сведения см. [в разделе Распознавание распознавания эмоций с помощью API распознавания лиц](emotion-recognition.md).

## <a name="related-links"></a>Связанные ссылки

- [Распознавание речи с помощью API службы распознавания речи](~/xamarin-forms/data-cloud/azure-cognitive-services/speech-recognition.md)
- [Документация по Microsoft Cognitive Services](https://www.microsoft.com/cognitive-services/documentation)
- [Cognitive Services ToDo (пример)](https://docs.microsoft.com/samples/xamarin/xamarin-forms-samples/webservices-todocognitiveservices)
