---
title: Предварительный просмотр XAML для Xamarin.Forms
description: В этой статье объясняется, как использовать предварительный просмотр XAML для просмотра Xamarin.Forms макетов, отображаемых при вводе. Предварительный просмотр XAML доступен в Visual Studio 2019 и Visual Studio 2019 для Mac.
zone_pivot_groups: platform
ms.prod: xamarin
ms.assetid: 84769ff1-72fd-4c44-8251-dd6d5bf8c7b2
ms.technology: xamarin-forms
author: maddyleger1
ms.author: maleger
ms.date: 03/16/2020
no-loc:
- Xamarin.Forms
- Xamarin.Essentials
ms.openlocfilehash: 5af5846c77c5cd63e14494c25e5dc04ebcea4b7d
ms.sourcegitcommit: f90e908a72cf616ee303c2751729b62f11654379
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/27/2020
ms.locfileid: "96299963"
---
# <a name="xaml-previewer-for-no-locxamarinforms"></a>Предварительный просмотр XAML для Xamarin.Forms

_Просмотр Xamarin.Forms макетов при вводе_

> [!WARNING]
> В Visual Studio 2019 версии 16,8 и Visual Studio для Mac версии 8,8 будет запущен предварительный просмотр XAML.
> Для предварительного просмотра XAML рекомендуется использовать **[горячую перезагрузку XAML](~/xamarin-forms/xaml/hot-reload.md)**.

## <a name="overview"></a>Обзор

Предварительный просмотр XAML показывает, как Xamarin.Forms будет выглядеть страница XAML в iOS и Android. При внесении изменений в код XAML вы увидите, что они отображаются сразу рядом с кодом. Предварительный просмотр XAML доступен в Visual Studio и Visual Studio для Mac.

## <a name="getting-started"></a>Начало работы

::: zone pivot="windows"

### <a name="visual-studio-2019"></a>Visual Studio 2019

Вы можете открыть предварительный просмотр XAML, щелкнув стрелки на панели разделенное представление. Если необходимо изменить поведение представления с разделением по умолчанию, воспользуйтесь **инструментами > параметры > диалоговом окне Xamarin.Forms предварительного просмотра для Xamarin > XAML** . В этом диалоговом окне можно выбрать представление документа по умолчанию и ориентацию разбиения.

[![::: No-Loc (Xamarin. Forms)::: параметры предварительного просмотра в Visual Studio](xaml-previewer-images/xamlp-options-vs-sm.png "::: No-Loc (Xamarin. Forms)::: параметры предварительного просмотра в Visual Studio")](xaml-previewer-images/xamlp-options-vs-lg.png#lightbox)

При открытии XAML-файла редактор открывает полный размер или рядом с предварительным просмотром на основе параметров, выбранных в **меню сервис > параметры > Xamarin > Xamarin.Forms XAML** Preview Dialog. Однако разбиение можно изменить для каждого файла в окне редактора.

#### <a name="xaml-preview-controls"></a>Элементы управления предварительным просмотром XAML

Выберите, следует ли просматривать код, предварительный просмотр XAML или оба эти кнопки на панели разделенное представление. С помощью средней кнопки можно поменять местами, на которых располагается предварительный просмотр и ваш код:

[![::: No-Loc (Xamarin. Forms)::: элементы управления предварительного просмотра для переключения между представлением конструктора, источника и разделения в Visual Studio](xaml-previewer-images/xamlp-controls-splitview-vs-sm.png "::: No-Loc (Xamarin. Forms)::: элементы управления предварительного просмотра для переключения между представлением конструктора, источника и разделения в Visual Studio")](xaml-previewer-images/xamlp-controls-splitview-vs-lg.png#lightbox)

Можно изменить, разбивается ли экран по вертикали или по горизонтали, или полностью свернуть одну панель:

[![::: No-Loc (Xamarin. Forms)::: панель предварительного просмотра элементы управления ориентацией в Visual Studio](xaml-previewer-images/xamlp-controls-orientation-vs-sm.png "::: No-Loc (Xamarin. Forms)::: панель предварительного просмотра элементы управления ориентацией в Visual Studio")](xaml-previewer-images/xamlp-controls-orientation-vs-lg.png#lightbox)

#### <a name="enable-or-disable-the-xaml-previewer"></a>Включение или отключение предварительного просмотра XAML

Вы можете отключить средство предварительного просмотра XAML в диалоговом окне **средства > параметры > Xamarin > Xamarin.Forms XAML** , выбрав редактор **XML по** умолчанию в качестве **редактора XAML по умолчанию**. Это также выключает структуру документа, панель свойств и панель элементов XAML. Чтобы включить средство предварительного просмотра XAML и эти средства снова, измените **редактор XAML по умолчанию** на " **Xamarin.Forms Предварительный просмотр**".

::: zone-end
::: zone pivot="macos"

### <a name="visual-studio-for-mac"></a>Visual Studio для Mac

Кнопка **Предварительный просмотр** отображается в редакторе при открытии страницы XAML. Показать или скрыть предварительный просмотр, нажав кнопки **предварительного просмотра** или **разбиения** в левом нижнем углу окна документа XAML:

[![::: No-Loc (Xamarin. Forms)::. Предварительный просмотр включен с помощью кнопки предварительного просмотра или разбиения](xaml-previewer-images/xamlp-list-sml.png)](xaml-previewer-images/xamlp-list.png#lightbox)

> [!NOTE]
> В более ранних версиях Visual Studio для Mac кнопка **Предварительный просмотр** находится в правом верхнем углу окна.

#### <a name="enable-or-disable-the-xaml-previewer"></a>Включение или отключение предварительного просмотра XAML

Вы можете отключить предварительный просмотр XAML в **Visual Studio > предпочтения > текстовый редактор > XAML** , ВЫБРАВ **Редактор XML по** умолчанию в качестве **редактора XAML по умолчанию**. Это также выключает структуру документа, панель свойств и панель элементов XAML. Чтобы включить средство предварительного просмотра XAML и эти средства снова, измените **редактор XAML по умолчанию** на " **Xamarin.Forms Предварительный просмотр**".

::: zone-end

## <a name="xaml-previewer-options"></a>Параметры средства предварительного просмотра XAML

Ниже перечислены параметры, доступные в верхней части области просмотра.

* **Android** — отображение версии экрана Android
* **iOS** — показывать версию iOS на экране (*Примечание. Если вы используете Visual Studio в Windows, для использования этого режима необходимо [связать с компьютером Mac](~/ios/get-started/installation/windows/connecting-to-mac/index.md)*)
* **Устройство** -раскрывающийся список устройств Android или iOS, включая разрешение и размер экрана
* **Книжная (значок)** — использует книжную ориентацию для предварительного просмотра.
* **Альбомная (значок)** — использует альбомную ориентацию для предварительного просмотра

## <a name="detect-design-mode"></a>Обнаружить режим конструктора

Статическое [`DesignMode.IsDesignModeEnabled`](xref:Xamarin.Forms.DesignMode.IsDesignModeEnabled) свойство сообщает, выполняется ли приложение в предварительном просмотре. С его помощью можно указать код, который будет выполняться только в том случае, если приложение не выполняется в предварительном просмотре:

```csharp
if (DesignMode.IsDesignModeEnabled)
{
  // Previewer only code  
}

if (!DesignMode.IsDesignModeEnabled)
{
  // Don't run in the Previewer  
}
```

Это свойство полезно при инициализации библиотеки в конструкторе страницы, которая не запускается во время разработки.

## <a name="troubleshooting"></a>Устранение неполадок

Если предварительный просмотр не работает, проверьте указанные ниже проблемы и [форумы Xamarin](https://forums.xamarin.com/categories/xamarin-forms).

### <a name="xaml-previewer-isnt-showing-or-shows-an-error"></a>В средстве предварительного просмотра XAML не отображается или отображается ошибка

* Для запуска средства предварительного просмотра может потребоваться некоторое время. Вы увидите "Инициализация прорисовки", пока она не будет готова.
* Попробуйте закрыть и снова открыть XAML файл.
* Убедитесь, что `App` у класса есть конструктор без параметров.
* Проверьте Xamarin.Forms версию — она должна быть не ниже Xamarin.Forms 3,6. Вы можете выполнить обновление до последней Xamarin.Forms версии с помощью NuGet.
* Проверьте установку JDK. для предварительного просмотра Android требуется по меньшей мере [JDK 8](https://www.oracle.com/technetwork/java/javase/downloads/index.html).
* Попробуйте обернуть все инициализированные классы в код C# страницы в `if (!DesignMode.IsDesignModeEnabled)` .

### <a name="custom-controls-arent-rendering"></a>Пользовательские элементы управления не подготовится к просмотру

Попробуйте выполнить сборку проекта. Предварительный просмотр показывает базовый класс элемента управления, если он не может обработать элемент управления, или если создатель элемента управления выдаст представление о времени разработки. Дополнительные сведения см. [в разделе Отрисовка пользовательских элементов управления в средстве предварительного просмотра XAML](render-custom-controls.md).
