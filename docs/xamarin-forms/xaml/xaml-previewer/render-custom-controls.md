---
title: Прорисовка пользовательских элементов управления в средстве предварительного просмотра XAML
description: В этой статье описывается, как показать пользовательские элементы управления в средстве предварительного просмотра XAML.
ms.prod: xamarin
ms.assetid: 4D795372-CB8F-48F4-B63D-845E44B261F7
ms.technology: xamarin-forms
author: maddyleger1
ms.author: maleger
ms.date: 03/27/2019
no-loc:
- Xamarin.Forms
- Xamarin.Essentials
ms.openlocfilehash: 0e58626c193fb8e4c1bcf071bc44b64af4009851
ms.sourcegitcommit: 4bbf54d2bc1df96af69814e2e5dae47be12e0474
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/10/2021
ms.locfileid: "102602948"
---
# <a name="render-custom-controls-in-the-xaml-previewer"></a>Прорисовка пользовательских элементов управления в средстве предварительного просмотра XAML

_Иногда пользовательские элементы управления не работают должным образом в средстве предварительного просмотра XAML. Воспользуйтесь инструкциями в этой статье, чтобы ознакомиться с ограничениями по предварительному просмотру пользовательских элементов управления._

> [!WARNING]
> Средство предварительного просмотра XAML устарело в Visual Studio 2019 версии 16,8 и Visual Studio для Mac версии 8,8 и заменено функцией горячей загрузки XAML в Visual Studio 2019 версии 16,9 и Visual Studio для Mac версии 8,9.
> Дополнительные сведения о горячей загрузке XAML см. в [документации](~/xamarin-forms/xaml/hot-reload.md).
## <a name="basic-preview-mode"></a>Базовый режим предварительного просмотра

Даже если проект не был создан, средство предварительного просмотра XAML будет отображать страницы. До сборки любой элемент управления, основанный на коде программной части, будет отображать его базовый Xamarin.Forms тип. При построении проекта предварительный просмотр XAML попытается показать пользовательские элементы управления с включенной отрисовкой во время разработки. В случае сбоя прорисовки будет показан базовый Xamarin.Forms тип.

## <a name="enable-design-time-rendering-for-custom-controls"></a>Включение отрисовки во время разработки для пользовательских элементов управления

Если вы сделаете собственные пользовательские элементы управления или используете элементы управления из сторонней библиотеки, предварительный просмотр может отобразить их неправильно. Пользовательские элементы управления должны присоединиться к отрисовке во время разработки, чтобы они отображались в средстве просмотра, независимо от того, был ли вы написали элемент управления или импортировали его из библиотеки. С помощью созданных элементов управления добавьте в [`[DesignTimeVisible(true)]`](xref:System.ComponentModel.DesignTimeVisibleAttribute) класс элемента управления, чтобы показать его в средстве предварительного просмотра:

```csharp
namespace MyProject
{
  [DesignTimeVisible(true)]
  public class MyControl : BaseControl
  {
    // Your control's code here
  }

}
```

В качестве примера используйте [базовый класс ИмажеЦирклеплугин'с Джеймс монтеманьо](https://github.com/jamesmontemagno/ImageCirclePlugin/blob/master/src/ImageCircle/CircleImage.shared.cs) .

## <a name="skiasharp-controls"></a>Элементы управления SkiaSharp

В настоящее время элементы управления SkiaSharp поддерживаются только при предварительном просмотре в iOS. Они не будут отображаться в предварительной версии Android.

## <a name="troubleshooting"></a>Диагностика

### <a name="check-your-xamarinforms-version"></a>Проверка Xamarin.Forms версии
Убедитесь, что установлено по крайней мере Xamarin.Forms 3,6. Версию можно обновить Xamarin.Forms на NuGet.

### <a name="even-with-designtimevisibletrue-my-custom-control-isnt-rendering-properly"></a>Даже с `[DesignTimeVisible(true)]` , мой пользовательский элемент управления не подготовится к просмотру должным образом.
Пользовательские элементы управления, которые сильно полагаются на код программной части или внутренние данные, не всегда работают в средстве предварительного просмотра XAML. Вы можете сделать следующее:

* Перемещение элемента управления, чтобы он не был инициализирован, если [включен режим конструктора](index.md#detect-design-mode)
* Настройка [данных времени разработки](design-time-data.md) для отображения фиктивных данных из серверной части

### <a name="the-xaml-previewer-shows-the-error-custom-controls-arent-rendering-properly"></a>В средстве предварительного просмотра XAML отображается ошибка "пользовательские элементы управления не отображаются должным образом".
Попробуйте очистить и перестроить проект, а также закрыть и снова открыть XAML файл.
