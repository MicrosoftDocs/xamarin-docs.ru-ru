---
title: Горячая перезагрузка XAML для Xamarin.Forms
description: Немедленно загружайте изменения в файл XAML для работающего приложения, чтобы не создавать Xamarin.Forms проект после каждого изменения XAML.
ms.prod: xamarin
ms.assetid: E220F054-32EE-424C-A7E5-6156BE271519
ms.technology: xamarin-forms
author: maddyleger1
ms.author: maleger
ms.date: 01/14/2021
no-loc:
- Xamarin.Forms
- Xamarin.Essentials
ms.openlocfilehash: 62c7be9bd737b4d1860dca9f75cdde6acfadaa96
ms.sourcegitcommit: 99e340360e8615fbc2971f48d6856f8701594825
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/14/2021
ms.locfileid: "98204103"
---
# <a name="xaml-hot-reload-for-no-locxamarinforms"></a>Горячая перезагрузка XAML для Xamarin.Forms

Горячая перезагрузка XAML подключается к существующему рабочему процессу, чтобы повысить производительность и сэкономить время. Без горячей перезагрузки XAML необходимо создавать и развертывать приложения каждый раз, когда нужно увидеть изменение XAML. При использовании горячей перезагрузки при сохранении файла XAML изменения в работающем приложении отражаются в реальном времени. Кроме того, будет поддерживаться состояние навигации и данные, что позволит быстро выполнять итерацию по пользовательскому интерфейсу без потери места в приложении. Таким образом, при горячей перезагрузке XAML вы тратите меньше времени на повторное создание и развертывание приложений для проверки изменений пользовательского интерфейса.

> [!NOTE]
> Если вы создаете приложение WPF или UWP, см. статью [Горячая перезагрузка XAML для UWP и WPF](/visualstudio/debugger/xaml-hot-reload).
>
> Горячая перезагрузка XAML для Xamarin.Forms проектов UWP в настоящее время _не_ работает Xamarin.Forms .

## <a name="system-requirements"></a>Требования к системе

| IDE/Framework | Требуется версия |
|------|------------------|
|Visual Studio 2019 | 16,4 или выше
Visual Studio 2019 для Mac | 8,4 или выше
Xamarin.Forms | 4,1 или выше

## <a name="enable-xaml-hot-reload-for-no-locxamarinforms"></a>Включить горячую перезагрузку XAML для Xamarin.Forms

Если вы начинаете с шаблона, то горячая Загрузка XAML по умолчанию включена, и проект настроен для работы без дополнительной настройки. Отлаживать приложение на эмуляторе Android, симуляторе или физическом устройстве, а также изменить код XAML и сохранить файл, чтобы активировать горячую перезагрузку XAML.

Если вы работаете из существующего Xamarin.Forms решения, для использования горячей перезагрузки XAML не требуется дополнительная установка, но может потребоваться проверить конфигурацию, чтобы обеспечить оптимальную работу. Сначала включите его в параметрах интегрированной среды разработки:

* В Windows установите флажок **Включить горячую перезагрузку XAML** (и требуемые платформы) в меню **Сервис**  >  **Параметры**  >  **Отладка**  >  **горячей перезагрузки**.
  * В более ранних версиях Visual Studio 2019 флажок находится в **меню Сервис**  >  **Параметры**  >    >  **Горячая перезагрузка** Xamarin.
* На компьютере Mac установите флажок **Включить горячую перезагрузку Xamarin** в меню настройки **Visual Studio**  >    >  **для**  >  **горячей перезагрузки Xamarin XAML**.
  * В более ранних версиях Visual Studio для Mac флажок находится в настройках **Visual Studio**  >    >  **проекты**"  >  **горячая" перезагрузка Xamarin**.

Затем в параметрах сборки Android и iOS убедитесь, что компоновщик имеет значение "не компоновать" или "Link None". Чтобы использовать горячую перезагрузку XAML с физическим устройством iOS, необходимо также установить флажок **включить интерпретатор Mono** (visual Studio 16,4 и более поздней версии) или добавить **интерпретатор** к **дополнительным** параметрам mtouch (Visual Studio 16,3 и ниже).

Можно использовать следующую блок-схему для проверки установки существующего проекта для использования с горячей перезагрузкой XAML:

![Настройка горячей загрузки XAML](hot-reload-images/hotreloadflowchart.png "Блок-схема настройки горячей загрузки XAML")

## <a name="resilient-reloading"></a>Устойчивая перезагрузка

Если вы вносите изменения в то, что невозможно перезагрузить горячую перезагрузку XAML, отобразится сообщение об ошибке с помощью IntelliSense. Эти изменения, известные как грубые изменения, содержат ошибочный ввод кода XAML или связывание элемента управления с несуществующим обработчиком событий. Даже при грубом изменении можно продолжить перезагрузку без перезапуска приложения — внести еще одно изменение в другое место в XAML-файле и нажать кнопку Сохранить. Грубое изменение не будет перезагружено, но другие изменения будут по прежнему применены.

## <a name="reload-on-multiple-platforms-at-once"></a>Повторная загрузка нескольких платформ

Горячая перезагрузка XAML поддерживает одновременную отладку в Visual Studio и Visual Studio для Mac. Вы можете одновременно развернуть устройства Android и целевой сервер iOS, чтобы увидеть изменения, отраженные на обеих платформах одновременно. Сведения об отладке на нескольких платформах см. в следующих статьях:
* **Windows** [: как задать несколько запускаемых проектов](/visualstudio/ide/how-to-set-multiple-startup-projects?view=vs-2019)
* **Mac** . [Установка нескольких запускаемых проектов](/visualstudio/mac/set-startup-projects?view=vsmac-2019)

## <a name="known-limitations"></a>Известные ограничения

* Другие Xamarin.Forms целевые объекты, такие как UWP и macOS, пока *не* поддерживаются. Ход выполнения поддержки UWP можно отслеживать [здесь](https://developercommunity.visualstudio.com/idea/661682/xaml-hot-reload-for-xamarinforms-on-uwp.html).
* Нельзя добавлять, удалять или переименовывать файлы или пакеты NuGet во время сеанса горячей загрузки XAML. При добавлении или удалении файла или пакета NuGet перестройте и повторно разверните приложение, чтобы продолжить использовать горячую перезагрузку XAML.
* Задайте для компоновщика значение " **не связывать** " или " **нет** " для оптимальной работы. Параметр **связать только пакет SDK** работает в большинстве случаев, но в некоторых случаях может завершиться ошибкой. Параметры компоновщика можно найти в параметрах сборки Android и iOS.
* Для отладки на физическом iPhone требуется, чтобы интерпретатор использовал горячую перезагрузку XAML. Для этого откройте параметры проекта, перейдите на вкладку сборка iOS и убедитесь, что параметр **включить интерпретатор Mono** включен. Может потребоваться изменить параметр **платформы** в верхней части страницы свойств на **iPhone**.
* Все ссылки, созданные путем назначения элемента управления другому полю или свойству с помощью его `x:Name` значения, не будут перезагружены.
* Обновление визуальной иерархии приложения оболочки в Аппшелл. XAML может вызвать проблемы, связанные с сохранением состояния приложения. Если возникают проблемы, перестройте приложение, чтобы продолжить перезагрузку.
* Горячая перезагрузка XAML не может перезагрузить код C#, включая обработчики событий, пользовательские элементы управления, код программной части страницы и дополнительные классы.

## <a name="more-resources"></a>Дополнительные ресурсы

* [Советы и рекомендации по горячей загрузке XAML](https://devblogs.microsoft.com/xamarin/tips-tricks-xaml-hot-reload/)
* [Полная перезагрузка XAML для подробного Xamarin.Forms изучения: Xamarin шоу](https://www.youtube.com/watch?v=crhjjPjzknk)

## <a name="troubleshooting"></a>Устранение неполадок

* Если не удается инициализировать горячую перезагрузку XAML:
  * Обновите Xamarin.Forms версию.
  * Убедитесь, что вы используете последнюю версию интегрированной среды разработки.
  * Задайте для параметров компоновщика Android или iOS значение **не связывать** в параметрах сборки проекта.
* Если при сохранении XAML-файла ничего не происходит, убедитесь, что в интегрированной среде разработки активирована Горячая перезагрузка XAML.
* Если отладка выполняется на физическом iPhone и приложение перестает отвечать, убедитесь, что интерпретатор включен. Чтобы включить его, установите флажок **включить интерпретатор Mono** (Visual Studio 16.4/8.4 и выше) или Add **--интерпретатор** в поле **Дополнительные аргументы mtouch** (Visual Studio 16.3/8.3 и более ранние версии) в параметрах сборки iOS.

Чтобы сообщить об ошибке, используйте команду **Справка**  >  **Отправить отзыв**  >  **сообщить о проблеме** в Windows и  >  **сообщить о проблеме** на компьютере Mac.
